rO0ABXNyABhleGNoYW5nZS5FeGNoYW5nZVBhY2thZ2URtFTb3DxESQIABloABWRlYnVnTAAKYmFzZUZvbGRlcnQAEkxqYXZhL2xhbmcvU3RyaW5nO0wAC2JpbmFyeUZpbGVzdAAVTGphdmEvdXRpbC9BcnJheUxpc3Q7TAAMaWdub3JlZEZpbGVzcQB+AAJMAA9zb3VyY2VDb2RlRmlsZXNxAH4AAkwABXRpdGxlcQB+AAF4cAF0AD8vbW50LzA2QjZDMjE1QjZDMjA1NjEvY29yZS9jb2RlL3JlcG9ydGVyL3J1bi9zYW1wbGVzL2ZpbGVzX2phdmFzcgATamF2YS51dGlsLkFycmF5TGlzdHiB0h2Zx2GdAwABSQAEc2l6ZXhwAAAABHcEAAAACnNyABRzcGR4bGliLkNoZWNrc3VtRmlsZQbzmoSce+n7AgAISQALbWluU2l6ZVRMU0hKAARzaXplTAADTUQ1cQB+AAFMAARTSEExcQB+AAFMAAZTSEEyNTZxAH4AAUwABFRMU0hxAH4AAUwADWZpbGVFeHRlbnNpb25xAH4AAUwACGZpbGVuYW1lcQB+AAF4cgAWdG9rZW5pemF0b3IuQmluYXJ5RmlsZTGIi/PCdDCPAgAFSQAKbWF4TWF0Y2hlc0wABGZpbGV0AA5MamF2YS9pby9GaWxlO0wADmlkZW50aWZpZXJIYXNocQB+AAFMAAdtYXRjaGVzcQB+AAJMAAlyZWZlcmVuY2VxAH4AAXhwAAAAA3NyAAxqYXZhLmlvLkZpbGUELaRFDg3k/wMAAUwABHBhdGhxAH4AAXhwdAA1c2FtcGxlcy9maWxlc19qYXZhL2FwYWNoZS9jb21tb25zL2xhbmcvQ2hhclV0aWxzLmphdmF3AgAveHQAKGFlNDA3MjFlN2ZhYzUyZjFlZWYyNmE4MTMxZTVmYjI0MDI5MWNjMjlzcQB+AAUAAAABdwQAAAAKcQB+AAp4dABYZ2l0aHViOmFkYmxvY2twbHVzLWFkYmxvY2twbHVzYW5kcm9pZC1kOTNlZTQ4L3NyYy9vcmcvYXBhY2hlL2NvbW1vbnMvbGFuZy9DaGFyVXRpbHMuamF2YQAAQAAAAAAAAABLgnQAIGQyOTMyMjg1NGY0NjdjYzkxOGZmYWRlZjQ4MjdjYTc5dAAoYWU0MDcyMWU3ZmFjNTJmMWVlZjI2YTgxMzFlNWZiMjQwMjkxY2MyOXQAQDFmNzU4NTBmMWNhY2JjZjkyMmU4YjgzODlmYWZjYzAwN2YzYjE1YWE5N2IzNmQ5MmQwNThkNjg3M2U5ZjBkYTZ0AEYwN0UyQkJCNkFERTc2NjMzMDI0MkQxMzgwMzFCRDBENUQyMUUxQTFGOTI1QkFDOTA3ODRDN0FCMEZGNDlCNjIxNkFERkRDdAAEamF2YXQAJC4vYXBhY2hlL2NvbW1vbnMvbGFuZy9DaGFyVXRpbHMuamF2YXNxAH4ABwAAAANzcQB+AAt0AD1zYW1wbGVzL2ZpbGVzX2phdmEvYXBhY2hlL2NvbW1vbnMvbGFuZy9TdHJpbmdFc2NhcGVVdGlscy5qYXZhdwIAL3h0ACgwMDYxNzk1OGIwNTdkOGFkZWYwN2I2NjcxMWJiNzI2YjA0OTRkMGEwc3EAfgAFAAAAAXcEAAAACnEAfgAXeHQAYGdpdGh1YjphZGJsb2NrcGx1cy1hZGJsb2NrcGx1c2FuZHJvaWQtZDkzZWU0OC9zcmMvb3JnL2FwYWNoZS9jb21tb25zL2xhbmcvU3RyaW5nRXNjYXBlVXRpbHMuamF2YQAAQAAAAAAAAABZwXQAIDYxMTc1NzhkYWE1MDQzMGI0ZTE2OTkxNzRiZDMzYzI3dAAoMDA2MTc5NThiMDU3ZDhhZGVmMDdiNjY3MTFiYjcyNmIwNDk0ZDBhMHQAQGFlN2RhMWQzOGIxZDAyOGZmNWU0NGUxNTU5NWFlYWM5YzI3N2M1NTFiNWQ5YjIzMWYyMjM0NjJjOTViYzViZjV0AEYwM0UyRTA1OUFDRTMxMzQyMTI5MkUxNzg0MzVGRDBBMUU2NUZEMjFGQTMzNTlGRTRCRDBDODc2MEFGNDY2MkMwNkJERUFEdAAEamF2YXQALC4vYXBhY2hlL2NvbW1vbnMvbGFuZy9TdHJpbmdFc2NhcGVVdGlscy5qYXZhc3EAfgAHAAAAA3NxAH4AC3QAN3NhbXBsZXMvZmlsZXNfamF2YS9hcGFjaGUvY29tbW9ucy9sYW5nL1N0cmluZ1V0aWxzLmphdmF3AgAveHQAKGQzMzdjOTRkMjI2MGYzMTVlNjIxNDA1MjkzNDkzODgxMDAxMTQzNDJzcQB+AAUAAAABdwQAAAAKcQB+ACN4dABaZ2l0aHViOmFkYmxvY2twbHVzLWFkYmxvY2twbHVzYW5kcm9pZC1kOTNlZTQ4L3NyYy9vcmcvYXBhY2hlL2NvbW1vbnMvbGFuZy9TdHJpbmdVdGlscy5qYXZhAABAAAAAAAAAAsXwdAAgZjVlYzM0MDBhZWRlMTRlNTBlZGM5NTRjMjU4MGRiZTB0AChkMzM3Yzk0ZDIyNjBmMzE1ZTYyMTQwNTI5MzQ5Mzg4MTAwMTE0MzQydABAMjFkNTlhZWVkZWQ0OGVjMjk4OGY0MmY0YmQyMTU5ZTRiMjI5NjlhODVmYzY3YzJmYmNmZjg4MWQ3MzkxZjY4N3QARjk4MTRFQzE2N0NFNjBBMjEwNjU2RDA3QTRBNDk5MEQwRTIxRTk1MkZDQjNBRkNGNEZDNEQxRjc0MkYwOUI3NThBQkRCODl0AARqYXZhdAAmLi9hcGFjaGUvY29tbW9ucy9sYW5nL1N0cmluZ1V0aWxzLmphdmFzcQB+AAcAAAADc3EAfgALdAAjc2FtcGxlcy9maWxlc19qYXZhL2ZpbGVzX21pbm9yLmphdmF3AgAveHQAKDliM2EyMmRkNTI0ZTUwZWQ4NGVjNTkxNDdiZTgwMTI5ODcxNjE4NmNzcQB+AAUAAAAAdwQAAAAKeHAAAEAAAAAAAAAAFJd0ACA5YzkyYWY5MDc2OTE5MDk5ZDg0MWYyMGI2OGU3NzQ4YnEAfgAydABAYTUwZTgzZWQ3ZWE3MzIwMzFiMWZjODhmNDM3NDU5MTZlNTU0YmQyMDY5NjZjMmQ4ZjQ0NDM0ZjNkODNjZDk1NHQARjUxNzI2MzI2Njk5QTcxOEJFNjYzQjFCOTg3NEY2MTUzRjM3Njg4MzM1MzJDRTlCMUY4MURBNzE0MkYwMDExNDI3RjBCRTZ0AARqYXZhdAASLi9maWxlc19taW5vci5qYXZheHNxAH4ABQAAAAB3BAAAAAp4c3EAfgAFAAAABHcEAAAACnNyABp0b2tlbml6YXRvci5Tb3VyY2VDb2RlRmlsZalHFkW7QxegAgABTAAYc25pcHBldHNJbnNpZGVTb3VyY2VDb2RlcQB+AAJ4cQB+AAgAAAADcQB+AAxxAH4AEnNxAH4ABQAAAAF3BAAAAApxAH4ACnhwc3EAfgAFAAAAAXcEAAAAGXNyAB10b2tlbml6YXRvci5Tb3VyY2VDb2RlU25pcHBldPHZ3ie9uqegAgAISQAHbGluZUVuZEkACWxpbmVTdGFydEkADG1hdGNoZXNMaW1pdEwADmlkZW50aWZpZXJIYXNocQB+AAFMAAdtYXRjaGVzcQB+AAJMAApwcm92ZW5hbmNlcQB+AAFMAAR0ZXh0cQB+AAFbAAZ0b2tlbnN0AAJbQ3hwAAABggAAAXkAAAAFcQB+ABJzcQB+AAUAAAAAdwQAAAAKeHB0AT0KICAgICAgICBpZiAoY2ggPCAweDEwKSB7CiAgICAgICAgICAgIHJldHVybiAiXFx1MDAwIiArIEludGVnZXIudG9IZXhTdHJpbmcoY2gpOwogICAgICAgIH0gZWxzZSBpZiAoY2ggPCAweDEwMCkgewogICAgICAgICAgICByZXR1cm4gIlxcdTAwIiArIEludGVnZXIudG9IZXhTdHJpbmcoY2gpOwogICAgICAgIH0gZWxzZSBpZiAoY2ggPCAweDEwMDApIHsKICAgICAgICAgICAgcmV0dXJuICJcXHUwIiArIEludGVnZXIudG9IZXhTdHJpbmcoY2gpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gIlxcdSIgKyBJbnRlZ2VyLnRvSGV4U3RyaW5nKGNoKTsKICAgIHVyAAJbQ7AmZrDiXYSsAgAAeHAAAABHAEkARgAoAFYAPABWACkAewBSACMAIwArAFYATQAoAFYAKQA7AH0ARQBMAEkARgAoAFYAPABWACkAewBSACMAIwArAFYATQAoAFYAKQA7AH0ARQBMAEkARgAoAFYAPABWACkAewBSACMAIwArAFYATQAoAFYAKQA7AH0AUgAjACMAKwBWAE0AKABWACkAO3hzcQB+ADsAAAADcQB+ABhxAH4AHnNxAH4ABQAAAAF3BAAAAApxAH4AF3hwc3EAfgAFAAAACHcEAAAAGXNxAH4APwAAAKgAAACbAAAABXEAfgAec3EAfgAFAAAAAHcEAAAACnhwdAF3CiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBTdHJpbmdXcml0ZXIgd3JpdGVyID0gbmV3IFN0cmluZ1dyaXRlcihzdHIubGVuZ3RoKCkgKiAyKTsKICAgICAgICAgICAgZXNjYXBlSmF2YVN0eWxlU3RyaW5nKHdyaXRlciwgc3RyLCBlc2NhcGVTaW5nbGVRdW90ZXMpOwogICAgICAgICAgICByZXR1cm4gd3JpdGVyLnRvU3RyaW5nKCk7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlvZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgdXEAfgBEAAAASwBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBUAFIAewBNAFYAPQBOAE0AKABWAE0AKAApACoAVgApADsATQAoAFYALABWACwAVgApADsAUgBWAE0AKAApADsAfQBDAEEAKABJAE8ARQB4AGMAZQBwAHQAaQBvAG4AVgApAHsAVgBNACgAKQA7AFIATgBVADsAfXNxAH4APwAAAP0AAACyAAAABXEAfgAec3EAfgAFAAAAAHcEAAAACnhwdAmfCiAgICAgICAgaWYgKG91dCA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIlRoZSBXcml0ZXIgbXVzdCBub3QgYmUgbnVsbCIpOwogICAgICAgIH0KICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpbnQgc3o7CiAgICAgICAgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGNoYXIgY2ggPSBzdHIuY2hhckF0KGkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoID4gMHhmZmYpIHsKICAgICAgICAgICAgICAgIG91dC53cml0ZSgiXFx1IiArIGhleChjaCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID4gMHhmZikgewogICAgICAgICAgICAgICAgb3V0LndyaXRlKCJcXHUwIiArIGhleChjaCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID4gMHg3ZikgewogICAgICAgICAgICAgICAgb3V0LndyaXRlKCJcXHUwMCIgKyBoZXgoY2gpKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA8IDMyKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXGInOgogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1xcJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnYicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdcbic6CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnXFwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCduJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1x0JzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcXCcpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ3QnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXGYnOgogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1xcJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnZicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdccic6CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnXFwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2ggPiAweGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgiXFx1MDAiICsgaGV4KGNoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoIlxcdTAwMCIgKyBoZXgoY2gpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoY2gpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdcJyc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlc2NhcGVTaW5nbGVRdW90ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnXFwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1wnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJyInOgogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1xcJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnIicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdcXCc6CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnXFwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcXCcpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICcvJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcXCcpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCA6CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZShjaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgdXEAfgBEAAAB2QBJAEYAKABWAD0APQBOAFUAKQB7AFQASABOAE0AKAAjACMAKQA7AH0ASQBGACgAVgA9AD0ATgBVACkAewBSADsAfQBJAFYAOwBWAD0AVgBNACgAKQA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AFYAOwBWACsAKwApAHsAVgBhAHIAVgA9AFYALgBWAGEAcgBBAHQAKABWACkAOwBJAEYAKABWAD4AVgApAHsAVgBNACgAIwAjACsATQAoAFYAKQApADsAfQBFAEwASQBGACgAVgA+AFYAKQB7AFYATQAoACMAIwArAE0AKABWACkAKQA7AH0ARQBMAEkARgAoAFYAPgBWACkAewBWAE0AKAAjACMAKwBNACgAVgApACkAOwB9AEUATABJAEYAKABWADwAVgApAHsAcwB3AGkAdABWACgAVgApAHsAQwBTACcAXABiACcAOgBWAE0AKAAnAFwAXAAnACkAOwBWAE0AKAAnAGIAJwApADsAVgA7AEMAUwAnAFwAbgAnADoAVgBNACgAJwBcAFwAJwApADsAVgBNACgAJwBuACcAKQA7AFYAOwBDAFMAJwBcAHQAJwA6AFYATQAoACcAXABcACcAKQA7AFYATQAoACcAdAAnACkAOwBWADsAQwBTACcAXABmACcAOgBWAE0AKAAnAFwAXAAnACkAOwBWAE0AKAAnAGYAJwApADsAVgA7AEMAUwAnAFwAcgAnADoAVgBNACgAJwBcAFwAJwApADsAVgBNACgAJwByACcAKQA7AFYAOwBWADoASQBGACgAVgA+AFYAKQB7AFYATQAoACMAIwArAE0AKABWACkAKQA7AH0ARQBMAHsAVgBNACgAIwAjACsATQAoAFYAKQApADsAfQBWADsAfQB9AEUATAB7AHMAdwBpAHQAVgAoAFYAKQB7AEMAUwAnAFwAJwAnADoASQBGACgAVgApAHsAVgBNACgAJwBcAFwAJwApADsAfQBWAE0AKAAnAFwAJwAnACkAOwBWADsAQwBTACcAIgAnADoAVgBNACgAJwBcAFwAJwApADsAVgBNACgAJwAiACcAKQA7AFYAOwBDAFMAJwBcAFwAJwA6AFYATQAoACcAXABcACcAKQA7AFYATQAoACcAXABcACcAKQA7AFYAOwBDAFMAJwAvACcAOgBWAE0AKAAnAFwAXAAnACkAOwBWAE0AKAAnAC8AJwApADsAVgA7AFYAOgBWAE0AKABWACkAOwBWADsAfQB9AH1zcQB+AD8AAAEgAAABEwAAAAVxAH4AHnNxAH4ABQAAAAB3BAAAAAp4cHQBVgogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3RyaW5nV3JpdGVyIHdyaXRlciA9IG5ldyBTdHJpbmdXcml0ZXIoc3RyLmxlbmd0aCgpKTsKICAgICAgICAgICAgdW5lc2NhcGVKYXZhKHdyaXRlciwgc3RyKTsKICAgICAgICAgICAgcmV0dXJuIHdyaXRlci50b1N0cmluZygpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpb2UucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIHVxAH4ARAAAAEcASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0AVABSAHsATQBWAD0ATgBNACgAVgBNACgAKQApADsATQAoAFYALABWACkAOwBSAFYATQAoACkAOwB9AEMAQQAoAEkATwBFAHgAYwBlAHAAdABpAG8AbgBWACkAewBWAE0AKAApADsAUgBOAFUAOwB9c3EAfgA/AAABgwAAATEAAAAFcQB+AB5zcQB+AAUAAAAAdwQAAAAKeHB0CkIKICAgICAgICBpZiAob3V0ID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiVGhlIFdyaXRlciBtdXN0IG5vdCBiZSBudWxsIik7CiAgICAgICAgfQogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGludCBzeiA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBTdHJpbmdCdWZmZXIgdW5pY29kZSA9IG5ldyBTdHJpbmdCdWZmZXIoNCk7CiAgICAgICAgYm9vbGVhbiBoYWRTbGFzaCA9IGZhbHNlOwogICAgICAgIGJvb2xlYW4gaW5Vbmljb2RlID0gZmFsc2U7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGNoYXIgY2ggPSBzdHIuY2hhckF0KGkpOwogICAgICAgICAgICBpZiAoaW5Vbmljb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaWNvZGUuYXBwZW5kKGNoKTsKICAgICAgICAgICAgICAgIGlmICh1bmljb2RlLmxlbmd0aCgpID09IDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW50IHZhbHVlID0gSW50ZWdlci5wYXJzZUludCh1bmljb2RlLnRvU3RyaW5nKCksIDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKChjaGFyKSB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWNvZGUuc2V0TGVuZ3RoKDApOwogICAgICAgICAgICAgICAgICAgICAgICBpblVuaWNvZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaGFkU2xhc2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gbmZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChJT0V4Y2VwdGlvbikgbmV3IElPRXhjZXB0aW9uKCJVbmFibGUgdG8gcGFyc2UgdW5pY29kZSB2YWx1ZTogIiArIHVuaWNvZGUpLmluaXRDYXVzZShuZmUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChoYWRTbGFzaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhZFNsYXNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFwnOgogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1xcJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1wnJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcJycpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdcIic6CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC53cml0ZSgnIicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdyJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdccicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdmJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcZicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd0JzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcdCcpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICduJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcbicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdiJzoKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCdcYicpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd1JzoKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluVW5pY29kZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOgogICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoY2gpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09ICdcXCcpIHsKICAgICAgICAgICAgICAgIGhhZFNsYXNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dC53cml0ZShjaCk7CiAgICAgICAgfQogICAgICAgIGlmIChoYWRTbGFzaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoJ1xcJyk7CiAgICAgICAgfQogICAgdXEAfgBEAAABvABJAEYAKABWAD0APQBOAFUAKQB7AFQASABOAE0AKAAjACMAKQA7AH0ASQBGACgAVgA9AD0ATgBVACkAewBSADsAfQBJAFYAPQBWAE0AKAApADsATQBWAD0ATgBNACgAVgApADsAQgBPAFYAPQBGADsAQgBPAFYAPQBGADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGEAcgBWAD0AVgAuAFYAYQByAEEAdAAoAFYAKQA7AEkARgAoAFYAKQB7AFYATQAoAFYAKQA7AEkARgAoAFYATQAoACkAPQA9AFYAKQB7AFQAUgB7AEkAVgA9AFYATQAoAFYATQAoACkALABWACkAOwBWAE0AKAAoAFYAKQBWACkAOwBWAE0AKABWACkAOwBWAD0ARgA7AFYAPQBGADsAfQBDAEEAKABOAHUAbQBiAGUAcgBGAG8AcgBtAGEAdABFAHgAYwBlAHAAdABpAG8AbgBWACkAewBUAEgAKABWACkATgBWACgAIwAjACsAVgApAC4ATQAoAFYAKQA7AH0AfQBWADsAfQBJAEYAKABWACkAewBWAD0ARgA7AHMAdwBpAHQAVgAoAFYAKQB7AEMAUwAnAFwAXAAnADoAVgBNACgAJwBcAFwAJwApADsAVgA7AEMAUwAnAFwAJwAnADoAVgBNACgAJwBcACcAJwApADsAVgA7AEMAUwAnAFwAIgAnADoAVgBNACgAJwAiACcAKQA7AFYAOwBDAFMAJwByACcAOgBWAE0AKAAnAFwAcgAnACkAOwBWADsAQwBTACcAZgAnADoAVgBNACgAJwBcAGYAJwApADsAVgA7AEMAUwAnAHQAJwA6AFYATQAoACcAXAB0ACcAKQA7AFYAOwBDAFMAJwBuACcAOgBWAE0AKAAnAFwAbgAnACkAOwBWADsAQwBTACcAYgAnADoAVgBNACgAJwBcAGIAJwApADsAVgA7AEMAUwAnAHUAJwA6AHsAVgA9AFQARQA7AFYAOwB9AFYAOgBWAE0AKABWACkAOwBWADsAfQBWADsAfQBFAEwASQBGACgAVgA9AD0AJwBcAFwAJwApAHsAVgA9AFQARQA7AFYAOwB9AFYATQAoAFYAKQA7AH0ASQBGACgAVgApAHsAVgBNACgAJwBcAFwAJwApADsAfXNxAH4APwAAAecAAAHaAAAABXEAfgAec3EAfgAFAAAAAHcEAAAACnhwdAFqCiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmNvbnRhaW5zTm9uZShzdHIsIENTVl9TRUFSQ0hfQ0hBUlMpKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFN0cmluZ1dyaXRlciB3cml0ZXIgPSBuZXcgU3RyaW5nV3JpdGVyKCk7CiAgICAgICAgICAgIGVzY2FwZUNzdih3cml0ZXIsIHN0cik7CiAgICAgICAgICAgIHJldHVybiB3cml0ZXIudG9TdHJpbmcoKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaW9lLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB1cQB+AEQAAABEAEkARgAoAFYATQAoAFYALABWACkAKQB7AFIAVgA7AH0AVABSAHsATQBWAD0ATgBNACgAKQA7AE0AKABWACwAVgApADsAUgBWAE0AKAApADsAfQBDAEEAKABJAE8ARQB4AGMAZQBwAHQAaQBvAG4AVgApAHsAVgBNACgAKQA7AFIATgBVADsAfXNxAH4APwAAAhAAAAIAAAAABXEAfgAec3EAfgAFAAAAAHcEAAAACnhwdAG6CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmNvbnRhaW5zTm9uZShzdHIsIENTVl9TRUFSQ0hfQ0hBUlMpKSB7CiAgICAgICAgICAgIGlmIChzdHIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3V0LndyaXRlKHN0cik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBvdXQud3JpdGUoQ1NWX1FVT1RFKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0ci5sZW5ndGgoKTsgaSsrKSB7CiAgICAgICAgICAgIGNoYXIgYyA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIGlmIChjID09IENTVl9RVU9URSkgewogICAgICAgICAgICAgICAgb3V0LndyaXRlKENTVl9RVU9URSk7ICAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0LndyaXRlKGMpOwogICAgICAgIH0KICAgICAgICBvdXQud3JpdGUoQ1NWX1FVT1RFKTsKICAgIHVxAH4ARAAAAGsASQBGACgAVgBNACgAVgAsAFYAKQApAHsASQBGACgAVgAhAD0ATgBVACkAewBWAE0AKABWACkAOwB9AFIAOwB9AFYATQAoAFYAKQA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AFYATQAoACkAOwBWACsAKwApAHsAVgBoAGEAcgBWAD0AVgAuAFYAaABhAHIAQQB0ACgAVgApADsASQBGACgAVgA9AD0AVgApAHsAVgBNACgAVgApADsAfQBWAE0AKABWACkAOwB9AFYATQAoAFYAKQA7c3EAfgA/AAACNQAAAigAAAAFcQB+AB5zcQB+AAUAAAAAdwQAAAAKeHB0AUkKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFN0cmluZ1dyaXRlciB3cml0ZXIgPSBuZXcgU3RyaW5nV3JpdGVyKCk7CiAgICAgICAgICAgIHVuZXNjYXBlQ3N2KHdyaXRlciwgc3RyKTsKICAgICAgICAgICAgcmV0dXJuIHdyaXRlci50b1N0cmluZygpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpb2UucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIHVxAH4ARAAAAEMASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0AVABSAHsATQBWAD0ATgBNACgAKQA7AE0AKABWACwAVgApADsAUgBWAE0AKAApADsAfQBDAEEAKABJAE8ARQB4AGMAZQBwAHQAaQBvAG4AVgApAHsAVgBNACgAKQA7AFIATgBVADsAfXNxAH4APwAAAmQAAAJOAAAABXEAfgAec3EAfgAFAAAAAHcEAAAACnhwdAJJCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHN0ci5sZW5ndGgoKSA8IDIpIHsKICAgICAgICAgICAgb3V0LndyaXRlKHN0cik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCBzdHIuY2hhckF0KDApICE9IENTVl9RVU9URSB8fCBzdHIuY2hhckF0KHN0ci5sZW5ndGgoKSAtIDEpICE9IENTVl9RVU9URSApIHsKICAgICAgICAgICAgb3V0LndyaXRlKHN0cik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgICAgICAgICAgU3RyaW5nIHF1b3RlbGVzcyA9IHN0ci5zdWJzdHJpbmcoMSwgc3RyLmxlbmd0aCgpIC0gMSk7CgogICAgICAgIGlmICggU3RyaW5nVXRpbHMuY29udGFpbnNBbnkocXVvdGVsZXNzLCBDU1ZfU0VBUkNIX0NIQVJTKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gU3RyaW5nVXRpbHMucmVwbGFjZShxdW90ZWxlc3MsIENTVl9RVU9URV9TVFIgKyBDU1ZfUVVPVEVfU1RSLCBDU1ZfUVVPVEVfU1RSKTsKICAgICAgICB9CgogICAgICAgIG91dC53cml0ZShzdHIpOwogICAgdXEAfgBEAAAAfgBJAEYAKABWAD0APQBOAFUAKQB7AFIAOwB9AEkARgAoAFYATQAoACkAPABWACkAewBWAE0AKABWACkAOwBSADsAfQBJAEYAKABWAE0AKABWACkAIQA9AFYAfAB8AFYATQAoAFYATQAoACkALQBWACkAIQA9AFYAKQB7AFYATQAoAFYAKQA7AFIAOwB9AFMAVgA9AFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYATQAoACkALQBWACkAOwBJAEYAKABWAE0AKABWACwAVgApACkAewBWAD0AVgBNACgAVgAsAFYAKwBWACwAVgApADsAfQBWAE0AKABWACkAO3hzcQB+ADsAAAADcQB+ACRxAH4AKnNxAH4ABQAAAAF3BAAAAApxAH4AI3hwc3EAfgAFAAAAO3cEAAAAhXNxAH4APwAAAO0AAADiAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAExCiAgICAgICAgaW50IHN0ckxlbjsKICAgICAgICBpZiAoc3RyID09IG51bGwgfHwgKHN0ckxlbiA9IHN0ci5sZW5ndGgoKSkgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJMZW47IGkrKykgewogICAgICAgICAgICBpZiAoKENoYXJhY3Rlci5pc1doaXRlc3BhY2Uoc3RyLmNoYXJBdChpKSkgPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABdAEkAVgA7AEkARgAoAFYAPQA9AE4AVQB8AHwAKABWAEwAZQBuAD0AVgBNACgAKQApAD0APQBWACkAewBSAFQARQA7AH0ARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKAAoAFYALgBWAHMAVwBoAFYAdABlAHMAcABhAGMAZQAoAFYATQAoAFYAKQApAD0APQBGACkAKQB7AFIARgA7AH0AfQBSAFQARQA7c3EAfgA/AAACDAAAAfoAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AjIKICAgICAgICBpbnQgc3RyTGVuOwogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCAoc3RyTGVuID0gc3RyLmxlbmd0aCgpKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIGludCBzdGFydCA9IDA7CiAgICAgICAgaWYgKHN0cmlwQ2hhcnMgPT0gbnVsbCkgewogICAgICAgICAgICB3aGlsZSAoKHN0YXJ0ICE9IHN0ckxlbikgJiYgQ2hhcmFjdGVyLmlzV2hpdGVzcGFjZShzdHIuY2hhckF0KHN0YXJ0KSkpIHsKICAgICAgICAgICAgICAgIHN0YXJ0Kys7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHN0cmlwQ2hhcnMubGVuZ3RoKCkgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdoaWxlICgoc3RhcnQgIT0gc3RyTGVuKSAmJiAoc3RyaXBDaGFycy5pbmRleE9mKHN0ci5jaGFyQXQoc3RhcnQpKSAhPSAtMSkpIHsKICAgICAgICAgICAgICAgIHN0YXJ0Kys7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoc3RhcnQpOwogICAgdXEAfgBEAAAAjwBJAFYAOwBJAEYAKABWAD0APQBOAFUAfAB8ACgAVgBMAGUAbgA9AFYATQAoACkAKQA9AD0AVgApAHsAUgBWADsAfQBJAFYAPQBWADsASQBGACgAVgA9AD0ATgBVACkAewBXACgAKABWACEAPQBWACkAJgAmAFYATQAoAFYATQAoAFYAKQApACkAewBWACsAKwA7AH0AfQBFAEwASQBGACgAVgBNACgAKQA9AD0AVgApAHsAUgBWADsAfQBFAEwAewBXACgAKABWACEAPQBWACkAJgAmACgAVgBNACgAVgBNACgAVgApACkAIQA9AC0AVgApACkAewBWACsAKwA7AH0AfQBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgApADtzcQB+AD8AAAI4AAACJgAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQCCQogICAgICAgIGludCBlbmQ7CiAgICAgICAgaWYgKHN0ciA9PSBudWxsIHx8IChlbmQgPSBzdHIubGVuZ3RoKCkpID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CgogICAgICAgIGlmIChzdHJpcENoYXJzID09IG51bGwpIHsKICAgICAgICAgICAgd2hpbGUgKChlbmQgIT0gMCkgJiYgQ2hhcmFjdGVyLmlzV2hpdGVzcGFjZShzdHIuY2hhckF0KGVuZCAtIDEpKSkgewogICAgICAgICAgICAgICAgZW5kLS07CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHN0cmlwQ2hhcnMubGVuZ3RoKCkgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdoaWxlICgoZW5kICE9IDApICYmIChzdHJpcENoYXJzLmluZGV4T2Yoc3RyLmNoYXJBdChlbmQgLSAxKSkgIT0gLTEpKSB7CiAgICAgICAgICAgICAgICBlbmQtLTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBlbmQpOwogICAgdXEAfgBEAAAAjQBJAFYAOwBJAEYAKABWAD0APQBOAFUAfAB8ACgAVgA9AFYATQAoACkAKQA9AD0AVgApAHsAUgBWADsAfQBJAEYAKABWAD0APQBOAFUAKQB7AFcAKAAoAFYAIQA9AFYAKQAmACYAVgBNACgAVgBNACgAVgAtAFYAKQApACkAewBWAC0ALQA7AH0AfQBFAEwASQBGACgAVgBNACgAKQA9AD0AVgApAHsAUgBWADsAfQBFAEwAewBXACgAKABWACEAPQBWACkAJgAmACgAVgBNACgAVgBNACgAVgAtAFYAKQApACEAPQAtAFYAKQApAHsAVgAtAC0AOwB9AH0AUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWACkAO3NxAH4APwAAAnYAAAJsAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEpCiAgICAgICAgaW50IHN0cnNMZW47CiAgICAgICAgaWYgKHN0cnMgPT0gbnVsbCB8fCAoc3Ryc0xlbiA9IHN0cnMubGVuZ3RoKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHJzOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSBuZXdBcnIgPSBuZXcgU3RyaW5nW3N0cnNMZW5dOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Ryc0xlbjsgaSsrKSB7CiAgICAgICAgICAgIG5ld0FycltpXSA9IHN0cmlwKHN0cnNbaV0sIHN0cmlwQ2hhcnMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3QXJyOwogICAgdXEAfgBEAAAAXABJAFYAOwBJAEYAKABWAD0APQBOAFUAfAB8ACgAVgBMAGUAbgA9AFYALgBsAGUAbgBnAHQAaAApAD0APQBWACkAewBSAFYAOwB9AFYAWwBdAFYAPQBOAFYAWwBzAHQAcgBzAEwAZQBuAF0AOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYAWwBpAF0APQBNACgAVgBbAGkAXQAsAFYAKQA7AH0AUgBWADtzcQB+AD8AAAMwAAADHwAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQB0QogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCBzZWFyY2hTdHIgPT0gbnVsbCB8fCBvcmRpbmFsIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIElOREVYX05PVF9GT1VORDsKICAgICAgICB9CiAgICAgICAgaWYgKHNlYXJjaFN0ci5sZW5ndGgoKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpbnQgZm91bmQgPSAwOwogICAgICAgIGludCBpbmRleCA9IElOREVYX05PVF9GT1VORDsKICAgICAgICBkbyB7CiAgICAgICAgICAgIGluZGV4ID0gc3RyLmluZGV4T2Yoc2VhcmNoU3RyLCBpbmRleCArIDEpOwogICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm91bmQrKzsKICAgICAgICB9IHdoaWxlIChmb3VuZCA8IG9yZGluYWwpOwogICAgICAgIHJldHVybiBpbmRleDsKICAgIHVxAH4ARAAAAGIASQBGACgAVgA9AD0ATgBVAHwAfABWAD0APQBOAFUAfAB8AFYAPAA9AFYAKQB7AFIAVgA7AH0ASQBGACgAVgBNACgAKQA9AD0AVgApAHsAUgBWADsAfQBJAFYAPQBWADsASQBWAD0AVgA7AEQATwB7AFYAPQBWAC4AVgBPAGYAKABWACwAVgArAFYAKQA7AEkARgAoAFYAPABWACkAewBSAFYAOwB9AFYAKwArADsAfQBXACgAVgA8AFYAKQA7AFIAVgA7c3EAfgA/AAAEVgAABEkAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AakKICAgICAgICBpZiAoc3RyID09IG51bGwgfHwgc3RyLmxlbmd0aCgpID09IDAgfHwgc2VhcmNoQ2hhcnMgPT0gbnVsbCB8fCBzZWFyY2hDaGFycy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyLmxlbmd0aCgpOyBpKyspIHsKICAgICAgICAgICAgY2hhciBjaCA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgc2VhcmNoQ2hhcnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIGlmIChzZWFyY2hDaGFyc1tqXSA9PSBjaCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIHVxAH4ARAAAAHIASQBGACgAVgA9AD0ATgBVAHwAfABWAE0AKAApAD0APQBWAHwAfABWAD0APQBOAFUAfAB8AFYATQA9AD0AVgApAHsAUgBGADsAfQBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWAE0AKAApADsAVgArACsAKQB7AFYAYQByAFYAPQBWAC4AVgBhAHIAQQB0ACgAVgApADsARgBPACgASQBWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AEkARgAoAFYAWwBqAF0APQA9AFYAKQB7AFIAVABFADsAfQB9AH0AUgBGADtzcQB+AD8AAASaAAAEkAAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBCgogICAgICAgIGlmIChpc0VtcHR5KHN0cikgfHwgaXNFbXB0eShzZWFyY2hDaGFycykpIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0ci5sZW5ndGgoKTsgaSsrKSB7CiAgICAgICAgICAgIGlmIChzZWFyY2hDaGFycy5pbmRleE9mKHN0ci5jaGFyQXQoaSkpIDwgMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0xOwogICAgdXEAfgBEAAAASgBJAEYAKABNACgAVgApAHwAfABNACgAVgApACkAewBSAC0AVgA7AH0ARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgBNACgAKQA7AFYAKwArACkAewBWAGYAKABWAC4AVgBuAGQAZQB4AE8AZgAoAFYATQAoAFYAKQApADwAVgApAHsAUgBWADsAfQB9AFIALQBWADtzcQB+AD8AAATDAAAEtAAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBvQogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCBpbnZhbGlkQ2hhcnMgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaW50IHN0clNpemUgPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgaW50IHZhbGlkU2l6ZSA9IGludmFsaWRDaGFycy5sZW5ndGg7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJTaXplOyBpKyspIHsKICAgICAgICAgICAgY2hhciBjaCA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgdmFsaWRTaXplOyBqKyspIHsKICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkQ2hhcnNbal0gPT0gY2gpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABzAEkARgAoAFYAPQA9AE4AVQB8AHwAVgA9AD0ATgBVACkAewBSAFQARQA7AH0ASQBWAD0AVgBNACgAKQA7AEkAVgA9AFYAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABzAHQAcgBTAFYAegBlADsAVgArACsAKQB7AFYAYQByAFYAPQBWAC4AVgBhAHIAQQB0ACgAVgApADsARgBPACgASQBWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AEkARgAoAFYAWwBqAF0APQA9AFYAKQB7AFIARgA7AH0AfQB9AFIAVABFADtzcQB+AD8AAAUYAAAE/gAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQCUwogICAgICAgIGlmICgoc3RyID09IG51bGwpIHx8IChzZWFyY2hTdHJzID09IG51bGwpKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgaW50IHN6ID0gc2VhcmNoU3Rycy5sZW5ndGg7CgogICAgICAgICAgICAgICAgaW50IHJldCA9IEludGVnZXIuTUFYX1ZBTFVFOwoKICAgICAgICBpbnQgdG1wID0gMDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN6OyBpKyspIHsKICAgICAgICAgICAgU3RyaW5nIHNlYXJjaCA9IHNlYXJjaFN0cnNbaV07CiAgICAgICAgICAgIGlmIChzZWFyY2ggPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG1wID0gc3RyLmluZGV4T2Yoc2VhcmNoKTsKICAgICAgICAgICAgaWYgKHRtcCA9PSAtMSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0bXAgPCByZXQpIHsKICAgICAgICAgICAgICAgIHJldCA9IHRtcDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChyZXQgPT0gSW50ZWdlci5NQVhfVkFMVUUpID8gLTEgOiByZXQ7CiAgICB1cQB+AEQAAACIAEkARgAoACgAVgA9AD0ATgBVACkAfAB8ACgAVgA9AD0ATgBVACkAKQB7AFIALQBWADsAfQBJAFYAPQBWADsASQBWAD0AVgA7AEkAVgA9AFYAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFMAVgA9AFYAUwB0AHIAcwBbAGkAXQA7AEkARgAoAFYAPQA9AE4AVQApAHsAVgA7AH0AVgA9AFYATQAoAFYAKQA7AEkARgAoAFYAPQA9AC0AVgApAHsAVgA7AH0ASQBGACgAVgA8AFYAKQB7AFYAPQBWADsAfQB9AFYAdQByAG4AKABWAD0APQBWACkAPwAtAFYAOgBWADtzcQB+AD8AAAVFAAAFMwAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQB1QogICAgICAgIGlmICgoc3RyID09IG51bGwpIHx8IChzZWFyY2hTdHJzID09IG51bGwpKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgaW50IHN6ID0gc2VhcmNoU3Rycy5sZW5ndGg7CiAgICAgICAgaW50IHJldCA9IC0xOwogICAgICAgIGludCB0bXAgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3o7IGkrKykgewogICAgICAgICAgICBTdHJpbmcgc2VhcmNoID0gc2VhcmNoU3Ryc1tpXTsKICAgICAgICAgICAgaWYgKHNlYXJjaCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0bXAgPSBzdHIubGFzdEluZGV4T2Yoc2VhcmNoKTsKICAgICAgICAgICAgaWYgKHRtcCA+IHJldCkgewogICAgICAgICAgICAgICAgcmV0ID0gdG1wOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICB1cQB+AEQAAAByAEkARgAoACgAVgA9AD0ATgBVACkAfAB8ACgAVgA9AD0ATgBVACkAKQB7AFIALQBWADsAfQBJAFYAPQBWADsASQBWAD0ALQBWADsASQBWAD0AVgA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AFYAOwBWACsAKwApAHsAUwBWAD0AVgBTAHQAcgBzAFsAaQBdADsASQBGACgAVgA9AD0ATgBVACkAewBWADsAfQBWAD0AVgBNACgAVgApADsASQBGACgAVgA+AFYAKQB7AFYAPQBWADsAfQB9AFYAdQByAG4AVgA7c3EAfgA/AAAFcwAABWEAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AUIKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdGFydCA8IDApIHsKICAgICAgICAgICAgc3RhcnQgPSBzdHIubGVuZ3RoKCkgKyBzdGFydDsgICAgICAgICB9CgogICAgICAgIGlmIChzdGFydCA8IDApIHsKICAgICAgICAgICAgc3RhcnQgPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhcnQgPiBzdHIubGVuZ3RoKCkpIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoc3RhcnQpOwogICAgdXEAfgBEAAAASwBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYATQAoACkAKwBWADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYAOwB9AEkARgAoAFYAPgBWAE0AKAApACkAewBSAFYAOwB9AFIAVgAuAHMAdQBiAFYAaQBuAGcAKABWACkAO3NxAH4APwAABbcAAAWYAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAIZCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZW5kIDwgMCkgewogICAgICAgICAgICBlbmQgPSBzdHIubGVuZ3RoKCkgKyBlbmQ7ICAgICAgICAgfQogICAgICAgIGlmIChzdGFydCA8IDApIHsKICAgICAgICAgICAgc3RhcnQgPSBzdHIubGVuZ3RoKCkgKyBzdGFydDsgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGVuZCA+IHN0ci5sZW5ndGgoKSkgewogICAgICAgICAgICBlbmQgPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdGFydCA+IGVuZCkgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhcnQgPCAwKSB7CiAgICAgICAgICAgIHN0YXJ0ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKGVuZCA8IDApIHsKICAgICAgICAgICAgZW5kID0gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpOwogICAgdXEAfgBEAAAAfABJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYATQAoACkAKwBWADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYATQAoACkAKwBWADsAfQBJAEYAKABWAD4AVgBNACgAKQApAHsAVgA9AFYATQAoACkAOwB9AEkARgAoAFYAPgBWACkAewBSAFYAOwB9AEkARgAoAFYAPABWACkAewBWAD0AVgA7AH0ASQBGACgAVgA8AFYAKQB7AFYAPQBWADsAfQBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYAKQA7c3EAfgA/AAAF2gAABc8AAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AOkKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gPCAwKSB7CiAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0ci5sZW5ndGgoKSA8PSBsZW4pIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbGVuKTsKICAgIHVxAH4ARAAAAD8ASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0ASQBGACgAVgA8AFYAKQB7AFIAVgA7AH0ASQBGACgAVgAuAFYAZwB0AGgAKAApADwAPQBWACkAewBSAFYAOwB9AFIAVgAuAHMAdQBiAFYAaQBuAGcAKABWACwAVgApADtzcQB+AD8AAAX7AAAF8AAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQA9QogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKGxlbiA8IDApIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KICAgICAgICBpZiAoc3RyLmxlbmd0aCgpIDw9IGxlbikgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoKCkgLSBsZW4pOwogICAgdXEAfgBEAAAARgBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWADwAVgApAHsAUgBWADsAfQBJAEYAKABWAC4AVgBnAHQAaAAoACkAPAA9AFYAKQB7AFIAVgA7AH0AUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYALgBWAGcAdABoACgAKQAtAFYAKQA7c3EAfgA/AAAGIwAABhUAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AVQKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gPCAwIHx8IHBvcyA+IHN0ci5sZW5ndGgoKSkgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGlmIChwb3MgPCAwKSB7CiAgICAgICAgICAgIHBvcyA9IDA7CiAgICAgICAgfQogICAgICAgIGlmIChzdHIubGVuZ3RoKCkgPD0gKHBvcyArIGxlbikpIHsKICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcocG9zKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcocG9zLCBwb3MgKyBsZW4pOwogICAgdXEAfgBEAAAAaQBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWADwAMAB8AHwAVgA+AFYALgBWAGcAdABoACgAKQApAHsAUgBWADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYAOwB9AEkARgAoAFYALgBWAGcAdABoACgAKQA8AD0AKABWACsAVgApACkAewBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgApADsAfQBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYAKwBWACkAO3NxAH4APwAABkwAAAZAAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEuCiAgICAgICAgaWYgKGlzRW1wdHkoc3RyKSB8fCBzZXBhcmF0b3IgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBpZiAoc2VwYXJhdG9yLmxlbmd0aCgpID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KICAgICAgICBpbnQgcG9zID0gc3RyLmluZGV4T2Yoc2VwYXJhdG9yKTsKICAgICAgICBpZiAocG9zID09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHBvcyk7CiAgICB1cQB+AEQAAABLAEkARgAoAE0AKABWACkAfAB8AFYAPQA9AE4AVQApAHsAUgBWADsAfQBJAEYAKABWAE0AKAApAD0APQBWACkAewBSAFYAOwB9AEkAVgA9AFYATQAoAFYAKQA7AEkARgAoAFYAPQA9AC0AVgApAHsAUgBWADsAfQBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYAKQA7c3EAfgA/AAAGdAAABmgAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AScKICAgICAgICBpZiAoaXNFbXB0eShzdHIpKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIGlmIChzZXBhcmF0b3IgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGludCBwb3MgPSBzdHIuaW5kZXhPZihzZXBhcmF0b3IpOwogICAgICAgIGlmIChwb3MgPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZyhwb3MgKyBzZXBhcmF0b3IubGVuZ3RoKCkpOwogICAgdXEAfgBEAAAARQBJAEYAKABNACgAVgApACkAewBSAFYAOwB9AEkARgAoAFYAPQA9AE4AVQApAHsAUgBWADsAfQBJAFYAPQBWAE0AKABWACkAOwBJAEYAKABWAD0APQAtAFYAKQB7AFIAVgA7AH0AUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYAKwBWAE0AKAApACkAO3NxAH4APwAABsEAAAa1AAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAFaCiAgICAgICAgaWYgKGlzRW1wdHkoc3RyKSkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBpZiAoaXNFbXB0eShzZXBhcmF0b3IpKSB7CiAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICB9CiAgICAgICAgaW50IHBvcyA9IHN0ci5sYXN0SW5kZXhPZihzZXBhcmF0b3IpOwogICAgICAgIGlmIChwb3MgPT0gLTEgfHwgcG9zID09IChzdHIubGVuZ3RoKCkgLSBzZXBhcmF0b3IubGVuZ3RoKCkpKSB7CiAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcocG9zICsgc2VwYXJhdG9yLmxlbmd0aCgpKTsKICAgIHVxAH4ARAAAAFQASQBGACgATQAoAFYAKQApAHsAUgBWADsAfQBJAEYAKABNACgAVgApACkAewBSAFYAOwB9AEkAVgA9AFYATQAoAFYAKQA7AEkARgAoAFYAPQA9AC0AMQB8AHwAVgA9AD0AKABWAE0AKAApAC0AVgBNACgAKQApACkAewBSAFYAOwB9AFIAVgAuAHMAdQBiAFYAaQBuAGcAKABWACsAVgBNACgAKQApADtzcQB+AD8AAAcFAAAG+QAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBcwogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCBvcGVuID09IG51bGwgfHwgY2xvc2UgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaW50IHN0YXJ0ID0gc3RyLmluZGV4T2Yob3Blbik7CiAgICAgICAgaWYgKHN0YXJ0ICE9IC0xKSB7CiAgICAgICAgICAgIGludCBlbmQgPSBzdHIuaW5kZXhPZihjbG9zZSwgc3RhcnQgKyBvcGVuLmxlbmd0aCgpKTsKICAgICAgICAgICAgaWYgKGVuZCAhPSAtMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoc3RhcnQgKyBvcGVuLmxlbmd0aCgpLCBlbmQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgdXEAfgBEAAAAZQBJAEYAKABWAD0APQBOAFUAfAB8AFYAPQA9AE4AVQB8AHwAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0ASQBWAD0AVgBNACgAVgApADsASQBGACgAVgAhAD0ALQBWACkAewBJAFYAPQBWAE0AKABWACwAVgArAFYATQAoACkAKQA7AEkARgAoAFYAIQA9AC0AVgApAHsAUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYAKwBWAE0AKAApACwAVgApADsAfQB9AFIATgBVADtzcQB+AD8AAAeEAAAHbwAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQCXQogICAgICAgIGlmIChhcnJheSA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBpbnQgYnVmU2l6ZSA9IChlbmRJbmRleCAtIHN0YXJ0SW5kZXgpOwogICAgICAgIGlmIChidWZTaXplIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KCiAgICAgICAgYnVmU2l6ZSAqPSAoKGFycmF5W3N0YXJ0SW5kZXhdID09IG51bGwgPyAxNiA6IGFycmF5W3N0YXJ0SW5kZXhdLnRvU3RyaW5nKCkubGVuZ3RoKCkpICsgMSk7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoYnVmU2l6ZSk7CgogICAgICAgIGZvciAoaW50IGkgPSBzdGFydEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA+IHN0YXJ0SW5kZXgpIHsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VwYXJhdG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXJyYXlbaV0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnVmLmFwcGVuZChhcnJheVtpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgdXEAfgBEAAAAqwBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAFYAPQAoAFYALQBWACkAOwBJAEYAKABWADwAPQBWACkAewBSAFYAOwB9AGIAdQBmAFMAaQB6AGUAKgA9ACgAKABWAFsAcwB0AGEAcgB0AEkAbgBkAGUAeABdAD0APQBOAFUAPwBWADoAVgBbAHMAdABhAHIAdABJAG4AZABlAHgAXQAuAE0AKAApAC4ATQAoACkAKQArAFYAKQA7AE0AVgA9AE4ATQAoAFYAUwBpAHoAZQApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKABWAD4AVgApAHsAVgBNACgAVgApADsAfQBJAEYAKABWAFsAaQBdACEAPQBOAFUAKQB7AFYATQAoAFYAWwBpAF0AKQA7AH0AfQBSAFYATQAoACkAO3NxAH4APwAAB90AAAfAAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdALiCiAgICAgICAgaWYgKGFycmF5ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChzZXBhcmF0b3IgPT0gbnVsbCkgewogICAgICAgICAgICBzZXBhcmF0b3IgPSBFTVBUWTsKICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpbnQgYnVmU2l6ZSA9IChlbmRJbmRleCAtIHN0YXJ0SW5kZXgpOwogICAgICAgIGlmIChidWZTaXplIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KCiAgICAgICAgYnVmU2l6ZSAqPSAoKGFycmF5W3N0YXJ0SW5kZXhdID09IG51bGwgPyAxNiA6IGFycmF5W3N0YXJ0SW5kZXhdLnRvU3RyaW5nKCkubGVuZ3RoKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICsgc2VwYXJhdG9yLmxlbmd0aCgpKTsKCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoYnVmU2l6ZSk7CgogICAgICAgIGZvciAoaW50IGkgPSBzdGFydEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA+IHN0YXJ0SW5kZXgpIHsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VwYXJhdG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXJyYXlbaV0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnVmLmFwcGVuZChhcnJheVtpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgdXEAfgBEAAAAvQBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWAD0APQBOAFUAKQB7AFYAPQBWADsAfQBJAFYAPQAoAFYALQBWACkAOwBJAEYAKABWADwAPQBWACkAewBSAFYAOwB9AGIAdQBmAFMAaQB6AGUAKgA9ACgAKABWAFsAcwB0AGEAcgB0AEkAbgBkAGUAeABdAD0APQBOAFUAPwBWADoAVgBbAHMAdABhAHIAdABJAG4AZABlAHgAXQAuAE0AKAApAC4ATQAoACkAKQArAFYATQAoACkAKQA7AE0AVgA9AE4ATQAoAFYAUwBpAHoAZQApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKABWAD4AVgApAHsAVgBNACgAVgApADsAfQBJAEYAKABWAFsAaQBdACEAPQBOAFUAKQB7AFYATQAoAFYAWwBpAF0AKQA7AH0AfQBSAFYATQAoACkAO3NxAH4APwAACAAAAAfwAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAGqCiAgICAgICAgaWYgKGlzRW1wdHkoc3RyKSkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBpbnQgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgY2hhcltdIGNocyA9IG5ldyBjaGFyW3N6XTsKICAgICAgICBpbnQgY291bnQgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3o7IGkrKykgewogICAgICAgICAgICBpZiAoIUNoYXJhY3Rlci5pc1doaXRlc3BhY2Uoc3RyLmNoYXJBdChpKSkpIHsKICAgICAgICAgICAgICAgIGNoc1tjb3VudCsrXSA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNvdW50ID09IHN6KSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgU3RyaW5nKGNocywgMCwgY291bnQpOwogICAgdXEAfgBEAAAAewBJAEYAKABNACgAVgApACkAewBSAFYAOwB9AEkAVgA9AFYATQAoACkAOwBWAFsAXQBWAD0ATgBWAFsAcwB6AF0AOwBJAFYAPQBWADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKAAhAFYALgBWAHMAVwBoAFYAdABlAHMAcABhAGMAZQAoAFYATQAoAFYAKQApACkAewBWAFsAVgArACsAXQA9AFYATQAoAFYAKQA7AH0AfQBJAEYAKABWAD0APQBWACkAewBSAFYAOwB9AFIATgBNACgAVgAsAFYALABWACkAO3NxAH4APwAACMoAAAi+AAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAFhCiAgICAgICAgaWYgKGlzRW1wdHkoc3RyKSB8fCBzdHIuaW5kZXhPZihyZW1vdmUpID09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIGNoYXJbXSBjaGFycyA9IHN0ci50b0NoYXJBcnJheSgpOwogICAgICAgIGludCBwb3MgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGNoYXJzW2ldICE9IHJlbW92ZSkgewogICAgICAgICAgICAgICAgY2hhcnNbcG9zKytdID0gY2hhcnNbaV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcoY2hhcnMsIDAsIHBvcyk7CiAgICB1cQB+AEQAAABgAEkARgAoAE0AKABWACkAfAB8AFYATQAoAFYAKQA9AD0ALQBWACkAewBSAFYAOwB9AFYAWwBdAFYAcwA9AFYATQAoACkAOwBJAFYAPQBWADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBJAEYAKABWAFsAaQBdACEAPQBWACkAewBWAFsAVgArACsAXQA9AFYAWwBpAF0AOwB9AH0AUgBOAE0AKABWACwAVgAsAFYAKQA7c3EAfgA/AAAJOAAACSAAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0A34KICAgICAgICBpZiAoaXNFbXB0eSh0ZXh0KSB8fCBpc0VtcHR5KHNlYXJjaFN0cmluZykgfHwgcmVwbGFjZW1lbnQgPT0gbnVsbCB8fCBtYXggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9CiAgICAgICAgaW50IHN0YXJ0ID0gMDsKICAgICAgICBpbnQgZW5kID0gdGV4dC5pbmRleE9mKHNlYXJjaFN0cmluZywgc3RhcnQpOwogICAgICAgIGlmIChlbmQgPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgfQogICAgICAgIGludCByZXBsTGVuZ3RoID0gc2VhcmNoU3RyaW5nLmxlbmd0aCgpOwogICAgICAgIGludCBpbmNyZWFzZSA9IHJlcGxhY2VtZW50Lmxlbmd0aCgpIC0gcmVwbExlbmd0aDsKICAgICAgICBpbmNyZWFzZSA9IChpbmNyZWFzZSA8IDAgPyAwIDogaW5jcmVhc2UpOwogICAgICAgIGluY3JlYXNlICo9IChtYXggPCAwID8gMTYgOiAobWF4ID4gNjQgPyA2NCA6IG1heCkpOwogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKHRleHQubGVuZ3RoKCkgKyBpbmNyZWFzZSk7CiAgICAgICAgd2hpbGUgKGVuZCAhPSAtMSkgewogICAgICAgICAgICBidWYuYXBwZW5kKHRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpKS5hcHBlbmQocmVwbGFjZW1lbnQpOwogICAgICAgICAgICBzdGFydCA9IGVuZCArIHJlcGxMZW5ndGg7CiAgICAgICAgICAgIGlmICgtLW1heCA9PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmQgPSB0ZXh0LmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBzdGFydCk7CiAgICAgICAgfQogICAgICAgIGJ1Zi5hcHBlbmQodGV4dC5zdWJzdHJpbmcoc3RhcnQpKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB1cQB+AEQAAADYAEkARgAoAE0AKABWACkAfAB8AE0AKABWACkAfAB8AFYAPQA9AE4AVQB8AHwAVgA9AD0AVgApAHsAUgBWADsAfQBJAFYAPQBWADsASQBWAD0AVgBNACgAVgAsAFYAKQA7AEkARgAoAFYAPQA9AC0AVgApAHsAUgBWADsAfQBJAFYAPQBWAE0AKAApADsASQBWAD0AVgBNACgAKQAtAFYAOwBWAD0AKABWADwAVgA/AFYAOgBWACkAOwBpAG4AYwByAGUAYQBzAGUAKgA9ACgAVgA8ADAAPwBWADoAKABWAD4AVgA0AD8AVgA0ADoAVgApACkAOwBNAFYAPQBOAE0AKABWAE0AKAApACsAVgApADsAVwAoAFYAIQA9AC0AVgApAHsAVgAuAGEAcABwAFYAKABWAE0AKABWACwAVgApACkALgBhAHAAcABWACgAVgApADsAVgA9AFYAKwBWADsASQBGACgALQAtAFYAPQA9AFYAKQB7AFYAOwB9AFYAPQBWAE0AKABWACwAVgApADsAfQBWAE0AKABWAE0AKABWACkAKQA7AFIAVgBNACgAKQA7c3EAfgA/AAAKRwAACcsAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0DbMKCiAgICAgICAgICAgICAgICAKICAgICAgICBpZiAodGV4dCA9PSBudWxsIHx8IHRleHQubGVuZ3RoKCkgPT0gMCB8fCBzZWFyY2hMaXN0ID09IG51bGwgfHwgCiAgICAgICAgICAgIHNlYXJjaExpc3QubGVuZ3RoID09IDAgfHwgcmVwbGFjZW1lbnRMaXN0ID09IG51bGwgfHwgcmVwbGFjZW1lbnRMaXN0Lmxlbmd0aCA9PSAwKSAKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiB0ZXh0OwogICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodGltZVRvTGl2ZSA8IDApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigiVGltZVRvTGl2ZSBvZiAiICsgdGltZVRvTGl2ZSArICIgaXMgbGVzcyB0aGFuIDA6ICIgKyB0ZXh0KTsKICAgICAgICB9CgogICAgICAgIGludCBzZWFyY2hMZW5ndGggPSBzZWFyY2hMaXN0Lmxlbmd0aDsKICAgICAgICBpbnQgcmVwbGFjZW1lbnRMZW5ndGggPSByZXBsYWNlbWVudExpc3QubGVuZ3RoOwoKICAgICAgICAgICAgICAgIGlmIChzZWFyY2hMZW5ndGggIT0gcmVwbGFjZW1lbnRMZW5ndGgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiU2VhcmNoIGFuZCBSZXBsYWNlIGFycmF5IGxlbmd0aHMgZG9uJ3QgbWF0Y2g6ICIKICAgICAgICAgICAgICAgICsgc2VhcmNoTGVuZ3RoCiAgICAgICAgICAgICAgICArICIgdnMgIgogICAgICAgICAgICAgICAgKyByZXBsYWNlbWVudExlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJvb2xlYW5bXSBub01vcmVNYXRjaGVzRm9yUmVwbEluZGV4ID0gbmV3IGJvb2xlYW5bc2VhcmNoTGVuZ3RoXTsKCiAgICAgICAgICAgICAgICBpbnQgdGV4dEluZGV4ID0gLTE7CiAgICAgICAgaW50IHJlcGxhY2VJbmRleCA9IC0xOwogICAgICAgIGludCB0ZW1wSW5kZXggPSAtMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VhcmNoTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKG5vTW9yZU1hdGNoZXNGb3JSZXBsSW5kZXhbaV0gfHwgc2VhcmNoTGlzdFtpXSA9PSBudWxsIHx8IAogICAgICAgICAgICAgICAgc2VhcmNoTGlzdFtpXS5sZW5ndGgoKSA9PSAwIHx8IHJlcGxhY2VtZW50TGlzdFtpXSA9PSBudWxsKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGVtcEluZGV4ID0gdGV4dC5pbmRleE9mKHNlYXJjaExpc3RbaV0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBJbmRleCA9PSAtMSkgewogICAgICAgICAgICAgICAgbm9Nb3JlTWF0Y2hlc0ZvclJlcGxJbmRleFtpXSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGV4dEluZGV4ID09IC0xIHx8IHRlbXBJbmRleCA8IHRleHRJbmRleCkgewogICAgICAgICAgICAgICAgICAgIHRleHRJbmRleCA9IHRlbXBJbmRleDsKICAgICAgICAgICAgICAgICAgICByZXBsYWNlSW5kZXggPSBpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHRleHRJbmRleCA9PSAtMSkgewogICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9CgogICAgICAgIGludCBzdGFydCA9IDA7CgogICAgICAgICAgICAgICAgaW50IGluY3JlYXNlID0gMDsKCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNlYXJjaExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaW50IGdyZWF0ZXIgPSByZXBsYWNlbWVudExpc3RbaV0ubGVuZ3RoKCkgLSBzZWFyY2hMaXN0W2ldLmxlbmd0aCgpOwogICAgICAgICAgICBpZiAoZ3JlYXRlciA+IDApIHsKICAgICAgICAgICAgICAgIGluY3JlYXNlICs9IDMgKiBncmVhdGVyOyAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICAgICAgICAgaW5jcmVhc2UgPSBNYXRoLm1pbihpbmNyZWFzZSwgdGV4dC5sZW5ndGgoKSAvIDUpOwoKICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcih0ZXh0Lmxlbmd0aCgpICsgaW5jcmVhc2UpOwoKICAgICAgICB3aGlsZSAodGV4dEluZGV4ICE9IC0xKSB7CgogICAgICAgICAgICBmb3IgKGludCBpID0gc3RhcnQ7IGkgPCB0ZXh0SW5kZXg7IGkrKykgewogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCh0ZXh0LmNoYXJBdChpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnVmLmFwcGVuZChyZXBsYWNlbWVudExpc3RbcmVwbGFjZUluZGV4XSk7CgogICAgICAgICAgICBzdGFydCA9IHRleHRJbmRleCArIHNlYXJjaExpc3RbcmVwbGFjZUluZGV4XS5sZW5ndGgoKTsKCiAgICAgICAgICAgIHRleHRJbmRleCA9IC0xOwogICAgICAgICAgICByZXBsYWNlSW5kZXggPSAtMTsKICAgICAgICAgICAgdGVtcEluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VhcmNoTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChub01vcmVNYXRjaGVzRm9yUmVwbEluZGV4W2ldIHx8IHNlYXJjaExpc3RbaV0gPT0gbnVsbCB8fCAKICAgICAgICAgICAgICAgICAgICBzZWFyY2hMaXN0W2ldLmxlbmd0aCgpID09IDAgfHwgcmVwbGFjZW1lbnRMaXN0W2ldID09IG51bGwpIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGVtcEluZGV4ID0gdGV4dC5pbmRleE9mKHNlYXJjaExpc3RbaV0sIHN0YXJ0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBJbmRleCA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIG5vTW9yZU1hdGNoZXNGb3JSZXBsSW5kZXhbaV0gPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGV4dEluZGV4ID09IC0xIHx8IHRlbXBJbmRleCA8IHRleHRJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW5kZXggPSB0ZW1wSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VJbmRleCA9IGk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBpbnQgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IHN0YXJ0OyBpIDwgdGV4dExlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQodGV4dC5jaGFyQXQoaSkpOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgcmVzdWx0ID0gYnVmLnRvU3RyaW5nKCk7CiAgICAgICAgaWYgKCFyZXBlYXQpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXBsYWNlRWFjaChyZXN1bHQsIHNlYXJjaExpc3QsIHJlcGxhY2VtZW50TGlzdCwgcmVwZWF0LCB0aW1lVG9MaXZlIC0gMSk7CiAgICB1cQB+AEQAAALKAEkARgAoAFYAPQA9AE4AVQB8AHwAVgBNACgAKQA9AD0AMAB8AHwAVgA9AD0ATgBVAHwAfABWAD0APQBWAHwAfABWAD0APQBOAFUAfAB8AFYALgBsAGUAbgBnAHQAaAA9AD0AVgApAHsAUgBWADsAfQBJAEYAKABWADwAVgApAHsAVABIAE4ATQAoACMAIwArAFYAKwAjACMAKwBWACkAOwB9AEkAVgA9AFYAOwBJAFYAPQBWADsASQBGACgAVgAhAD0AVgApAHsAVABIAE4ATQAoACMAIwArAHMAZQBhAHIAYwBoAEwAZQBuAGcAdABoACsAIwAjACsAVgApADsAfQBWAFsAXQBWAD0ATgBWAFsAcwBlAGEAcgBjAGgATABlAG4AZwB0AGgAXQA7AEkAVgA9AC0AVgA7AEkAVgA9AC0AVgA7AEkAVgA9AC0AVgA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AFYAOwBWACsAKwApAHsASQBGACgAVgBbAGkAXQB8AHwAVgBbAGkAXQA9AD0ATgBVAHwAfABWAFsAaQBdAC4ATQAoACkAPQA9ADAAfAB8AFYAWwBpAF0APQA9AE4AVQApAHsAVgA7AH0AVgA9AFYATQAoAFYAWwBpAF0AKQA7AEkARgAoAFYAPQA9AC0AVgApAHsAVgBbAGkAXQA9AFQARQA7AH0ARQBMAHsASQBGACgAVgA9AD0ALQAxAHwAfABWADwAVgApAHsAVgA9AFYAOwBWAD0AVgA7AH0AfQB9AEkARgAoAFYAPQA9AC0AVgApAHsAUgBWADsAfQBJAFYAPQBWADsASQBWAD0AVgA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AHMAZQBhAHIAYwBoAEwAVgBzAHQALgBsAGUAbgBnAHQAaAA7AFYAKwArACkAewBJAFYAPQBWAFsAaQBdAC4ATQAoACkALQBWAFsAaQBdAC4ATQAoACkAOwBJAEYAKABWAD4AVgApAHsAVgArAD0AMwAqAFYAOwB9AH0AVgA9AFYATQAoAFYALABWAE0AKAApAC8AVgApADsATQBWAD0ATgBNACgAVgBNACgAKQArAFYAKQA7AFcAKABWACEAPQAtAFYAKQB7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AFYAOwBWACsAKwApAHsAVgBNACgAVgBNACgAVgApACkAOwB9AFYATQAoAFYAWwByAGUAcABsAGEAYwBlAEkAbgBkAGUAeABdACkAOwBWAD0AVgArAFYAWwByAGUAcABsAGEAYwBlAEkAbgBkAGUAeABdAC4ATQAoACkAOwBWAD0ALQBWADsAVgA9AC0AVgA7AFYAPQAtAFYAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AEkARgAoAFYAWwBpAF0AfAB8AFYAWwBpAF0APQA9AE4AVQB8AHwAVgBbAGkAXQAuAE0AKAApAD0APQAwAHwAfABWAFsAaQBdAD0APQBOAFUAKQB7AFYAOwB9AFYAPQBWAE0AKABWAFsAaQBdACwAVgApADsASQBGACgAVgA9AD0ALQBWACkAewBWAFsAaQBdAD0AVABFADsAfQBFAEwAewBJAEYAKABWAD0APQAtADEAfAB8AFYAPABWACkAewBWAD0AVgA7AFYAPQBWADsAfQB9AH0AfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAE0AKABWAE0AKABWACkAKQA7AH0AUwBWAD0AVgBNACgAKQA7AEkARgAoACEAVgApAHsAUgBWADsAfQBSAE0AKABWACwAVgAsAFYALABWACwAVgAtAFYAKQA7c3EAfgA/AAAKpQAACooAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0A0wKICAgICAgICBpZiAoaXNFbXB0eShzdHIpIHx8IGlzRW1wdHkoc2VhcmNoQ2hhcnMpKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIGlmIChyZXBsYWNlQ2hhcnMgPT0gbnVsbCkgewogICAgICAgICAgICByZXBsYWNlQ2hhcnMgPSBFTVBUWTsKICAgICAgICB9CiAgICAgICAgYm9vbGVhbiBtb2RpZmllZCA9IGZhbHNlOwogICAgICAgIGludCByZXBsYWNlQ2hhcnNMZW5ndGggPSByZXBsYWNlQ2hhcnMubGVuZ3RoKCk7CiAgICAgICAgaW50IHN0ckxlbmd0aCA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcihzdHJMZW5ndGgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY2hhciBjaCA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIGludCBpbmRleCA9IHNlYXJjaENoYXJzLmluZGV4T2YoY2gpOwogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgbW9kaWZpZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgcmVwbGFjZUNoYXJzTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgYnVmLmFwcGVuZChyZXBsYWNlQ2hhcnMuY2hhckF0KGluZGV4KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGNoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAobW9kaWZpZWQpIHsKICAgICAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyOwogICAgdXEAfgBEAAAArQBJAEYAKABNACgAVgApAHwAfABNACgAVgApACkAewBSAFYAOwB9AEkARgAoAFYAPQA9AE4AVQApAHsAVgA9AFYAOwB9AEIATwBWAD0ARgA7AEkAVgA9AFYATQAoACkAOwBJAFYAPQBWAE0AKAApADsATQBWAD0ATgBNACgAVgApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGEAcgBWAD0AVgAuAFYAYQByAEEAdAAoAFYAKQA7AEkAVgA9AFYALgBWAE8AZgAoAFYAKQA7AEkARgAoAFYAPgA9AFYAKQB7AFYAPQBUAEUAOwBJAEYAKABWADwAVgApAHsAVgBNACgAVgBNACgAVgApACkAOwB9AH0ARQBMAHsAVgBNACgAVgApADsAfQB9AEkARgAoAFYAKQB7AFIAVgBNACgAKQA7AH0AUgBWADtzcQB+AD8AAAsFAAAK5wAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQC2gogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKG92ZXJsYXkgPT0gbnVsbCkgewogICAgICAgICAgICBvdmVybGF5ID0gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGludCBsZW4gPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgaWYgKHN0YXJ0IDwgMCkgewogICAgICAgICAgICBzdGFydCA9IDA7CiAgICAgICAgfQogICAgICAgIGlmIChzdGFydCA+IGxlbikgewogICAgICAgICAgICBzdGFydCA9IGxlbjsKICAgICAgICB9CiAgICAgICAgaWYgKGVuZCA8IDApIHsKICAgICAgICAgICAgZW5kID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKGVuZCA+IGxlbikgewogICAgICAgICAgICBlbmQgPSBsZW47CiAgICAgICAgfQogICAgICAgIGlmIChzdGFydCA+IGVuZCkgewogICAgICAgICAgICBpbnQgdGVtcCA9IHN0YXJ0OwogICAgICAgICAgICBzdGFydCA9IGVuZDsKICAgICAgICAgICAgZW5kID0gdGVtcDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdCdWZmZXIobGVuICsgc3RhcnQgLSBlbmQgKyBvdmVybGF5Lmxlbmd0aCgpICsgMSkKICAgICAgICAgICAgLmFwcGVuZChzdHIuc3Vic3RyaW5nKDAsIHN0YXJ0KSkKICAgICAgICAgICAgLmFwcGVuZChvdmVybGF5KQogICAgICAgICAgICAuYXBwZW5kKHN0ci5zdWJzdHJpbmcoZW5kKSkKICAgICAgICAgICAgLnRvU3RyaW5nKCk7CiAgICB1cQB+AEQAAAC4AEkARgAoAFYAPQA9AE4AVQApAHsAUgBOAFUAOwB9AEkARgAoAFYAPQA9AE4AVQApAHsAVgA9AFYAOwB9AEkAVgA9AFYALgBWAGcAdABoACgAKQA7AEkARgAoAFYAPABWACkAewBWAD0AVgA7AH0ASQBGACgAVgA+AFYAKQB7AFYAPQBWADsAfQBJAEYAKABWADwAVgApAHsAVgA9AFYAOwB9AEkARgAoAFYAPgBWACkAewBWAD0AVgA7AH0ASQBGACgAVgA+AFYAKQB7AEkAVgA9AFYAOwBWAD0AVgA7AFYAPQBWADsAfQBSAE4ATQAoAFYAKwBWAC0AVgArAFYALgBWAGcAdABoACgAKQArAFYAKQAuAE0AKABWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWACkAKQAuAE0AKABWACkALgBhAHAAcABWACgAVgAuAHMAdQBiAFYAaQBuAGcAKABWACkAKQAuAE0AKAApADtzcQB+AD8AAAs6AAALIgAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQCZQogICAgICAgIGlmIChpc0VtcHR5KHN0cikpIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CgogICAgICAgIGlmIChzdHIubGVuZ3RoKCkgPT0gMSkgewogICAgICAgICAgICBjaGFyIGNoID0gc3RyLmNoYXJBdCgwKTsKICAgICAgICAgICAgaWYgKGNoID09IENoYXJVdGlscy5DUiB8fCBjaCA9PSBDaGFyVXRpbHMuTEYpIHsKICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KCiAgICAgICAgaW50IGxhc3RJZHggPSBzdHIubGVuZ3RoKCkgLSAxOwogICAgICAgIGNoYXIgbGFzdCA9IHN0ci5jaGFyQXQobGFzdElkeCk7CgogICAgICAgIGlmIChsYXN0ID09IENoYXJVdGlscy5MRikgewogICAgICAgICAgICBpZiAoc3RyLmNoYXJBdChsYXN0SWR4IC0gMSkgPT0gQ2hhclV0aWxzLkNSKSB7CiAgICAgICAgICAgICAgICBsYXN0SWR4LS07CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGxhc3QgIT0gQ2hhclV0aWxzLkNSKSB7CiAgICAgICAgICAgIGxhc3RJZHgrKzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbGFzdElkeCk7CiAgICB1cQB+AEQAAACbAEkARgAoAE0AKABWACkAKQB7AFIAVgA7AH0ASQBGACgAVgBNACgAKQA9AD0AVgApAHsAVgBhAHIAVgA9AFYALgBWAGEAcgBBAHQAKABWACkAOwBJAEYAKABWAD0APQBWAC4AQwBSAHwAfABWAD0APQBWAC4ATABGACkAewBSAFYAOwB9AFIAVgA7AH0ASQBWAD0AVgBNACgAKQAtAFYAOwBDAEgAVgA9AFYATQAoAFYASQBkAHgAKQA7AEkARgAoAFYAPQA9AFYAKQB7AEkARgAoAFYATQAoAFYALQBWACkAPQA9AFYAKQB7AFYALQAtADsAfQB9AEUATABJAEYAKABWACEAPQBWACkAewBWACsAKwA7AH0AUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWACkAO3NxAH4APwAAC4EAAAt4AAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEICiAgICAgICAgaWYgKHN0ci5sZW5ndGgoKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBzdWIgPSBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGgoKSAtIHNlcC5sZW5ndGgoKSk7CiAgICAgICAgaWYgKHNlcC5lcXVhbHMoc3ViKSkgewogICAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoKCkgLSBzZXAubGVuZ3RoKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyOwogICAgdXEAfgBEAAAATABJAEYAKABWAE0AKAApAD0APQBWACkAewBSAFYAOwB9AFMAVgA9AFYALgBWAFYAaQBuAGcAKABWAE0AKAApAC0AVgBNACgAKQApADsASQBGACgAVgBNACgAVgApACkAewBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYATQAoACkALQBWAE0AKAApACkAOwB9AFIAVgA7c3EAfgA/AAALmAAAC48AAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0APMKICAgICAgICBpbnQgaWR4ID0gc3RyLmxhc3RJbmRleE9mKHNlcCk7CiAgICAgICAgaWYgKGlkeCA9PSBzdHIubGVuZ3RoKCkgLSBzZXAubGVuZ3RoKCkpIHsKICAgICAgICAgICAgcmV0dXJuIHNlcDsKICAgICAgICB9IGVsc2UgaWYgKGlkeCAhPSAtMSkgewogICAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZyhpZHgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICB9CiAgICB1cQB+AEQAAABAAEkAVgA9AFYATQAoAFYAKQA7AEkARgAoAFYAPQA9AFYATQAoACkALQBWAE0AKAApACkAewBSAFYAOwB9AEUATABJAEYAKABWACEAPQAtAFYAKQB7AFIAVgAuAHMAdQBiAFYAaQBuAGcAKABWACkAOwB9AEUATAB7AFIAVgA7AH1zcQB+AD8AAAvrAAAL2gAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQB4AogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaW50IHN0ckxlbiA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBpZiAoc3RyTGVuIDwgMikgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGludCBsYXN0SWR4ID0gc3RyTGVuIC0gMTsKICAgICAgICBTdHJpbmcgcmV0ID0gc3RyLnN1YnN0cmluZygwLCBsYXN0SWR4KTsKICAgICAgICBjaGFyIGxhc3QgPSBzdHIuY2hhckF0KGxhc3RJZHgpOwogICAgICAgIGlmIChsYXN0ID09IENoYXJVdGlscy5MRikgewogICAgICAgICAgICBpZiAocmV0LmNoYXJBdChsYXN0SWR4IC0gMSkgPT0gQ2hhclV0aWxzLkNSKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0LnN1YnN0cmluZygwLCBsYXN0SWR4IC0gMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgIHVxAH4ARAAAAHcASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0ASQBWAD0AVgBNACgAKQA7AEkARgAoAFYAPABWACkAewBSAFYAOwB9AEkAVgA9AFYALQBWADsAUwBWAD0AVgAuAHMAdQBiAFYAaQBuAGcAKABWACwAVgApADsAQwBIAFYAPQBWAE0AKABWAEkAZAB4ACkAOwBJAEYAKABWAD0APQBWACkAewBJAEYAKABWAE0AKABWAC0AVgApAD0APQBWACkAewBWAHUAcgBuAFYATQAoAFYALABWAC0AVgApADsAfQB9AFYAdQByAG4AVgA7c3EAfgA/AAAMBQAAC/cAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AXoKICAgICAgICBpbnQgbGFzdElkeCA9IHN0ci5sZW5ndGgoKSAtIDE7CiAgICAgICAgaWYgKGxhc3RJZHggPD0gMCkgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGNoYXIgbGFzdCA9IHN0ci5jaGFyQXQobGFzdElkeCk7CiAgICAgICAgaWYgKGxhc3QgPT0gQ2hhclV0aWxzLkxGKSB7CiAgICAgICAgICAgIGlmIChzdHIuY2hhckF0KGxhc3RJZHggLSAxKSA9PSBDaGFyVXRpbHMuQ1IpIHsKICAgICAgICAgICAgICAgIGxhc3RJZHgtLTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxhc3RJZHgrKzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbGFzdElkeCk7CiAgICB1cQB+AEQAAABaAEkAVgA9AFYATQAoACkALQBWADsASQBGACgAVgA8AD0AVgApAHsAUgBWADsAfQBDAEgAVgA9AFYATQAoAFYASQBkAHgAKQA7AEkARgAoAFYAPQA9AFYAKQB7AEkARgAoAFYATQAoAFYALQBWACkAPQA9AFYAKQB7AFYALQAtADsAfQB9AEUATAB7AFYAKwArADsAfQBSAFYALgBzAHUAYgBWAGkAbgBnACgAVgAsAFYAKQA7c3EAfgA/AAAMWwAADDEAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0BUAKICAgICAgICAKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChyZXBlYXQgPD0gMCkgewogICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfQogICAgICAgIGludCBpbnB1dExlbmd0aCA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBpZiAocmVwZWF0ID09IDEgfHwgaW5wdXRMZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBpZiAoaW5wdXRMZW5ndGggPT0gMSAmJiByZXBlYXQgPD0gUEFEX0xJTUlUKSB7CiAgICAgICAgICAgIHJldHVybiBwYWRkaW5nKHJlcGVhdCwgc3RyLmNoYXJBdCgwKSk7CiAgICAgICAgfQoKICAgICAgICBpbnQgb3V0cHV0TGVuZ3RoID0gaW5wdXRMZW5ndGggKiByZXBlYXQ7CiAgICAgICAgc3dpdGNoIChpbnB1dExlbmd0aCkgewogICAgICAgICAgICBjYXNlIDEgOgogICAgICAgICAgICAgICAgY2hhciBjaCA9IHN0ci5jaGFyQXQoMCk7CiAgICAgICAgICAgICAgICBjaGFyW10gb3V0cHV0MSA9IG5ldyBjaGFyW291dHB1dExlbmd0aF07CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gcmVwZWF0IC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQxW2ldID0gY2g7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhvdXRwdXQxKTsKICAgICAgICAgICAgY2FzZSAyIDoKICAgICAgICAgICAgICAgIGNoYXIgY2gwID0gc3RyLmNoYXJBdCgwKTsKICAgICAgICAgICAgICAgIGNoYXIgY2gxID0gc3RyLmNoYXJBdCgxKTsKICAgICAgICAgICAgICAgIGNoYXJbXSBvdXRwdXQyID0gbmV3IGNoYXJbb3V0cHV0TGVuZ3RoXTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSByZXBlYXQgKiAyIC0gMjsgaSA+PSAwOyBpLS0sIGktLSkgewogICAgICAgICAgICAgICAgICAgIG91dHB1dDJbaV0gPSBjaDA7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0MltpICsgMV0gPSBjaDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhvdXRwdXQyKTsKICAgICAgICAgICAgZGVmYXVsdCA6CiAgICAgICAgICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcihvdXRwdXRMZW5ndGgpOwogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc3RyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgICAgICB9CiAgICB1cQB+AEQAAAFJAEkARgAoAFYAPQA9AE4AVQApAHsAUgBOAFUAOwB9AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0ASQBWAD0AVgBNACgAKQA7AEkARgAoAFYAPQA9ADEAfAB8AFYAPQA9AFYAKQB7AFIAVgA7AH0ASQBGACgAVgA9AD0AMQAmACYAVgA8AD0AVgApAHsAUgBNACgAVgAsAFYATQAoAFYAKQApADsAfQBJAFYAPQBpAG4AcAB1AHQATABlAG4AZwB0AGgAKgBWADsAUwAoAFYAKQB7AFYAVgA6AFYAYQByAFYAPQBWAC4AVgBhAHIAQQB0ACgAVgApADsAVgBbAF0AVgA9AE4AVgBbAG8AdQB0AHAAdQB0AEwAZQBuAGcAdABoAF0AOwBGAE8AKABWAG4AdABWAD0AVgAtAFYAOwBWAD4APQBWADsAVgAtAC0AKQB7AFYAWwBpAF0APQBWADsAfQBSAE4ATQAoAFYAKQA7AFYAVgA6AEMASABWAD0AVgBNACgAVgApADsAQwBIAFYAPQBWAE0AKABWACkAOwBWAFsAXQBWAD0ATgBWAFsAbwB1AHQAcAB1AHQATABlAG4AZwB0AGgAXQA7AEYATwAoAFYAbgB0AFYAPQByAGUAcABlAGEAdAAqAFYALQBWADsAVgA+AD0AVgA7AFYALQAtACwAVgAtAC0AKQB7AFYAWwBpAF0APQBWADsAVgBbAFYAKwAxAF0APQBWADsAfQBSAE4ATQAoAFYAKQA7AFYAOgBNAFYAPQBOAE0AKABWACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYATQAoAFYAKQA7AH0AUgBWAE0AKAApADsAfXNxAH4APwAADH0AAAx0AAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEpCiAgICAgICAgaWYgKHJlcGVhdCA8IDApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oIkNhbm5vdCBwYWQgYSBuZWdhdGl2ZSBhbW91bnQ6ICIgKyByZXBlYXQpOwogICAgICAgIH0KICAgICAgICBmaW5hbCBjaGFyW10gYnVmID0gbmV3IGNoYXJbcmVwZWF0XTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBidWZbaV0gPSBwYWRDaGFyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IFN0cmluZyhidWYpOwogICAgdXEAfgBEAAAASABJAEYAKABWADwAVgApAHsAVABIAE4ATQAoACMAIwArAFYAKQA7AH0ARgBMAFYAWwBdAFYAPQBOAFYAWwByAGUAcABlAGEAdABdADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAFsAaQBdAD0AVgA7AH0AUgBOAE0AKABWACkAO3NxAH4APwAADLcAAAyrAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAFECiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBpbnQgcGFkcyA9IHNpemUgLSBzdHIubGVuZ3RoKCk7CiAgICAgICAgaWYgKHBhZHMgPD0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOyAgICAgICAgIH0KICAgICAgICBpZiAocGFkcyA+IFBBRF9MSU1JVCkgewogICAgICAgICAgICByZXR1cm4gcmlnaHRQYWQoc3RyLCBzaXplLCBTdHJpbmcudmFsdWVPZihwYWRDaGFyKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHIuY29uY2F0KHBhZGRpbmcocGFkcywgcGFkQ2hhcikpOwogICAgdXEAfgBEAAAASQBJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAFYAPQBWAC0AVgBNACgAKQA7AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0ASQBGACgAVgA+AFYAKQB7AFIATQAoAFYALABWACwAVgBNACgAVgApACkAOwB9AFIAVgBNACgATQAoAFYALABWACkAKQA7c3EAfgA/AAAM7QAADNAAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0A2IKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChpc0VtcHR5KHBhZFN0cikpIHsKICAgICAgICAgICAgcGFkU3RyID0gIiAiOwogICAgICAgIH0KICAgICAgICBpbnQgcGFkTGVuID0gcGFkU3RyLmxlbmd0aCgpOwogICAgICAgIGludCBzdHJMZW4gPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgaW50IHBhZHMgPSBzaXplIC0gc3RyTGVuOwogICAgICAgIGlmIChwYWRzIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsgICAgICAgICB9CiAgICAgICAgaWYgKHBhZExlbiA9PSAxICYmIHBhZHMgPD0gUEFEX0xJTUlUKSB7CiAgICAgICAgICAgIHJldHVybiByaWdodFBhZChzdHIsIHNpemUsIHBhZFN0ci5jaGFyQXQoMCkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBhZHMgPT0gcGFkTGVuKSB7CiAgICAgICAgICAgIHJldHVybiBzdHIuY29uY2F0KHBhZFN0cik7CiAgICAgICAgfSBlbHNlIGlmIChwYWRzIDwgcGFkTGVuKSB7CiAgICAgICAgICAgIHJldHVybiBzdHIuY29uY2F0KHBhZFN0ci5zdWJzdHJpbmcoMCwgcGFkcykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoYXJbXSBwYWRkaW5nID0gbmV3IGNoYXJbcGFkc107CiAgICAgICAgICAgIGNoYXJbXSBwYWRDaGFycyA9IHBhZFN0ci50b0NoYXJBcnJheSgpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhZHM7IGkrKykgewogICAgICAgICAgICAgICAgcGFkZGluZ1tpXSA9IHBhZENoYXJzW2kgJSBwYWRMZW5dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdHIuY29uY2F0KG5ldyBTdHJpbmcocGFkZGluZykpOwogICAgICAgIH0KICAgIHVxAH4ARAAAANwASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0ASQBGACgATQAoAFYAKQApAHsAVgA9ACMAIwA7AH0ASQBWAD0AVgBNACgAKQA7AEkAVgA9AFYATQAoACkAOwBJAFYAPQBWAC0AVgA7AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0ASQBGACgAVgA9AD0AMQAmACYAVgA8AD0AVgApAHsAUgBNACgAVgAsAFYALABWAE0AKABWACkAKQA7AH0ASQBGACgAVgA9AD0AVgApAHsAUgBWAE0AKABWACkAOwB9AEUATABJAEYAKABWADwAVgApAHsAUgBWAE0AKABWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWACkAKQA7AH0ARQBMAHsAVgBbAF0AVgA9AE4AVgBbAHAAYQBkAHMAXQA7AFYAWwBdAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAFsAaQBdAD0AVgBbAGkAJQBwAGEAZABMAGUAbgBdADsAfQBSAFYATQAoAE4ATQAoAFYAKQApADsAfXNxAH4APwAADScAAA0bAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAFDCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBpbnQgcGFkcyA9IHNpemUgLSBzdHIubGVuZ3RoKCk7CiAgICAgICAgaWYgKHBhZHMgPD0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOyAgICAgICAgIH0KICAgICAgICBpZiAocGFkcyA+IFBBRF9MSU1JVCkgewogICAgICAgICAgICByZXR1cm4gbGVmdFBhZChzdHIsIHNpemUsIFN0cmluZy52YWx1ZU9mKHBhZENoYXIpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHBhZGRpbmcocGFkcywgcGFkQ2hhcikuY29uY2F0KHN0cik7CiAgICB1cQB+AEQAAABKAEkARgAoAFYAPQA9AE4AVQApAHsAUgBOAFUAOwB9AEkAVgA9AFYALQBWAE0AKAApADsASQBGACgAVgA8AD0AVgApAHsAUgBWADsAfQBJAEYAKABWAD4AVgApAHsAUgBNACgAVgAsAFYALABWAE0AKABWACkAKQA7AH0AUgBNACgAVgAsAFYAKQAuAE0AKABWACkAO3NxAH4APwAADV0AAA1AAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdANhCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAoaXNFbXB0eShwYWRTdHIpKSB7CiAgICAgICAgICAgIHBhZFN0ciA9ICIgIjsKICAgICAgICB9CiAgICAgICAgaW50IHBhZExlbiA9IHBhZFN0ci5sZW5ndGgoKTsKICAgICAgICBpbnQgc3RyTGVuID0gc3RyLmxlbmd0aCgpOwogICAgICAgIGludCBwYWRzID0gc2l6ZSAtIHN0ckxlbjsKICAgICAgICBpZiAocGFkcyA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7ICAgICAgICAgfQogICAgICAgIGlmIChwYWRMZW4gPT0gMSAmJiBwYWRzIDw9IFBBRF9MSU1JVCkgewogICAgICAgICAgICByZXR1cm4gbGVmdFBhZChzdHIsIHNpemUsIHBhZFN0ci5jaGFyQXQoMCkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBhZHMgPT0gcGFkTGVuKSB7CiAgICAgICAgICAgIHJldHVybiBwYWRTdHIuY29uY2F0KHN0cik7CiAgICAgICAgfSBlbHNlIGlmIChwYWRzIDwgcGFkTGVuKSB7CiAgICAgICAgICAgIHJldHVybiBwYWRTdHIuc3Vic3RyaW5nKDAsIHBhZHMpLmNvbmNhdChzdHIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoYXJbXSBwYWRkaW5nID0gbmV3IGNoYXJbcGFkc107CiAgICAgICAgICAgIGNoYXJbXSBwYWRDaGFycyA9IHBhZFN0ci50b0NoYXJBcnJheSgpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhZHM7IGkrKykgewogICAgICAgICAgICAgICAgcGFkZGluZ1tpXSA9IHBhZENoYXJzW2kgJSBwYWRMZW5dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nKHBhZGRpbmcpLmNvbmNhdChzdHIpOwogICAgICAgIH0KICAgIHVxAH4ARAAAAN4ASQBGACgAVgA9AD0ATgBVACkAewBSAE4AVQA7AH0ASQBGACgATQAoAFYAKQApAHsAVgA9ACMAIwA7AH0ASQBWAD0AVgBNACgAKQA7AEkAVgA9AFYATQAoACkAOwBJAFYAPQBWAC0AVgA7AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0ASQBGACgAVgA9AD0AMQAmACYAVgA8AD0AVgApAHsAUgBNACgAVgAsAFYALABWAE0AKABWACkAKQA7AH0ASQBGACgAVgA9AD0AVgApAHsAUgBWAE0AKABWACkAOwB9AEUATABJAEYAKABWADwAVgApAHsAUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWACkALgBNACgAVgApADsAfQBFAEwAewBWAFsAXQBWAD0ATgBWAFsAcABhAGQAcwBdADsAVgBbAF0AVgA9AFYATQAoACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYAWwBpAF0APQBWAFsAaQAlAHAAYQBkAEwAZQBuAF0AOwB9AFIATgBNACgAVgApAC4ATQAoAFYAKQA7AH1zcQB+AD8AAA2sAAANoAAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBRwogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCBzaXplIDw9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CiAgICAgICAgaW50IHN0ckxlbiA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBpbnQgcGFkcyA9IHNpemUgLSBzdHJMZW47CiAgICAgICAgaWYgKHBhZHMgPD0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBzdHIgPSBsZWZ0UGFkKHN0ciwgc3RyTGVuICsgcGFkcyAvIDIsIHBhZENoYXIpOwogICAgICAgIHN0ciA9IHJpZ2h0UGFkKHN0ciwgc2l6ZSwgcGFkQ2hhcik7CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIHVxAH4ARAAAAFAASQBGACgAVgA9AD0ATgBVAHwAfABWADwAPQBWACkAewBSAFYAOwB9AEkAVgA9AFYATQAoACkAOwBJAFYAPQBWAC0AVgA7AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0AVgA9AE0AKABWACwAVgBMAGUAbgArAFYALwBWACwAVgApADsAVgA9AE0AKABWACwAVgAsAFYAKQA7AFIAVgA7c3EAfgA/AAAN1wAADcgAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AYgKICAgICAgICBpZiAoc3RyID09IG51bGwgfHwgc2l6ZSA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIGlmIChpc0VtcHR5KHBhZFN0cikpIHsKICAgICAgICAgICAgcGFkU3RyID0gIiAiOwogICAgICAgIH0KICAgICAgICBpbnQgc3RyTGVuID0gc3RyLmxlbmd0aCgpOwogICAgICAgIGludCBwYWRzID0gc2l6ZSAtIHN0ckxlbjsKICAgICAgICBpZiAocGFkcyA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIHN0ciA9IGxlZnRQYWQoc3RyLCBzdHJMZW4gKyBwYWRzIC8gMiwgcGFkU3RyKTsKICAgICAgICBzdHIgPSByaWdodFBhZChzdHIsIHNpemUsIHBhZFN0cik7CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIHVxAH4ARAAAAF8ASQBGACgAVgA9AD0ATgBVAHwAfABWADwAPQBWACkAewBSAFYAOwB9AEkARgAoAE0AKABWACkAKQB7AFYAPQAjACMAOwB9AEkAVgA9AFYATQAoACkAOwBJAFYAPQBWAC0AVgA7AEkARgAoAFYAPAA9AFYAKQB7AFIAVgA7AH0AVgA9AE0AKABWACwAVgBMAGUAbgArAFYALwBWACwAVgApADsAVgA9AE0AKABWACwAVgAsAFYAKQA7AFIAVgA7c3EAfgA/AAAOIgAADhkAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0ARcKICAgICAgICBpbnQgc3RyTGVuOwogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCAoc3RyTGVuID0gc3RyLmxlbmd0aCgpKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgU3RyaW5nQnVmZmVyKHN0ckxlbikKICAgICAgICAgICAgLmFwcGVuZChDaGFyYWN0ZXIudG9UaXRsZUNhc2Uoc3RyLmNoYXJBdCgwKSkpCiAgICAgICAgICAgIC5hcHBlbmQoc3RyLnN1YnN0cmluZygxKSkKICAgICAgICAgICAgLnRvU3RyaW5nKCk7CiAgICB1cQB+AEQAAABJAEkAVgA7AEkARgAoAFYAPQA9AE4AVQB8AHwAKABWAEwAZQBuAD0AVgBNACgAKQApAD0APQBWACkAewBSAFYAOwB9AFIATgBNACgAVgApAC4ATQAoAFYATQAoAFYATQAoAFYAKQApACkALgBNACgAVgAuAHMAdQBiAFYAaQBuAGcAKABWACkAKQAuAE0AKAApADtzcQB+AD8AAA5OAAAORQAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBFwogICAgICAgIGludCBzdHJMZW47CiAgICAgICAgaWYgKHN0ciA9PSBudWxsIHx8IChzdHJMZW4gPSBzdHIubGVuZ3RoKCkpID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdCdWZmZXIoc3RyTGVuKQogICAgICAgICAgICAuYXBwZW5kKENoYXJhY3Rlci50b0xvd2VyQ2FzZShzdHIuY2hhckF0KDApKSkKICAgICAgICAgICAgLmFwcGVuZChzdHIuc3Vic3RyaW5nKDEpKQogICAgICAgICAgICAudG9TdHJpbmcoKTsKICAgIHVxAH4ARAAAAEkASQBWADsASQBGACgAVgA9AD0ATgBVAHwAfAAoAFYATABlAG4APQBWAE0AKAApACkAPQA9AFYAKQB7AFIAVgA7AH0AUgBOAE0AKABWACkALgBNACgAVgBNACgAVgBNACgAVgApACkAKQAuAE0AKABWAC4AcwB1AGIAVgBpAG4AZwAoAFYAKQApAC4ATQAoACkAO3NxAH4APwAADowAAA54AAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAKNCiAgICAgICAgaW50IHN0ckxlbjsKICAgICAgICBpZiAoc3RyID09IG51bGwgfHwgKHN0ckxlbiA9IHN0ci5sZW5ndGgoKSkgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KICAgICAgICBTdHJpbmdCdWZmZXIgYnVmZmVyID0gbmV3IFN0cmluZ0J1ZmZlcihzdHJMZW4pOwoKICAgICAgICBjaGFyIGNoID0gMDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0ckxlbjsgaSsrKSB7CiAgICAgICAgICAgIGNoID0gc3RyLmNoYXJBdChpKTsKICAgICAgICAgICAgaWYgKENoYXJhY3Rlci5pc1VwcGVyQ2FzZShjaCkpIHsKICAgICAgICAgICAgICAgIGNoID0gQ2hhcmFjdGVyLnRvTG93ZXJDYXNlKGNoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChDaGFyYWN0ZXIuaXNUaXRsZUNhc2UoY2gpKSB7CiAgICAgICAgICAgICAgICBjaCA9IENoYXJhY3Rlci50b0xvd2VyQ2FzZShjaCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoQ2hhcmFjdGVyLmlzTG93ZXJDYXNlKGNoKSkgewogICAgICAgICAgICAgICAgY2ggPSBDaGFyYWN0ZXIudG9VcHBlckNhc2UoY2gpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoY2gpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCk7CiAgICB1cQB+AEQAAACbAEkAVgA7AEkARgAoAFYAPQA9AE4AVQB8AHwAKABWAEwAZQBuAD0AVgBNACgAKQApAD0APQBWACkAewBSAFYAOwB9AE0AVgA9AE4ATQAoAFYAKQA7AFYAYQByAFYAPQBWADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAD0AVgAuAFYAYQByAEEAdAAoAFYAKQA7AEkARgAoAFYATQAoAFYAKQApAHsAVgA9AFYATQAoAFYAKQA7AH0ARQBMAEkARgAoAFYATQAoAFYAKQApAHsAVgA9AFYATQAoAFYAKQA7AH0ARQBMAEkARgAoAFYATQAoAFYAKQApAHsAVgA9AFYATQAoAFYAKQA7AH0AVgBNACgAVgApADsAfQBSAFYATQAoACkAO3NxAH4APwAADq4AAA6jAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEJCiAgICAgICAgaWYgKGlzRW1wdHkoc3RyKSB8fCBpc0VtcHR5KHN1YikpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGludCBjb3VudCA9IDA7CiAgICAgICAgaW50IGlkeCA9IDA7CiAgICAgICAgd2hpbGUgKChpZHggPSBzdHIuaW5kZXhPZihzdWIsIGlkeCkpICE9IC0xKSB7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIGlkeCArPSBzdWIubGVuZ3RoKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb3VudDsKICAgIHVxAH4ARAAAAEAASQBGACgATQAoAFYAKQB8AHwATQAoAFYAKQApAHsAUgBWADsAfQBJAFYAPQBWADsASQBWAD0AVgA7AFcAKAAoAFYAPQBWAE0AKABWACwAVgApACkAIQA9AC0AVgApAHsAVgArACsAOwBWACsAPQBWAE0AKAApADsAfQBSAFYAO3NxAH4APwAADs8AAA7EAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAETCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaW50IHN6ID0gc3RyLmxlbmd0aCgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3o7IGkrKykgewogICAgICAgICAgICBpZiAoQ2hhcmFjdGVyLmlzTGV0dGVyKHN0ci5jaGFyQXQoaSkpID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABLAEkARgAoAFYAPQA9AE4AVQApAHsAUgBGADsAfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKABWAC4AVgBzAEwAZQB0AHQAZQByACgAVgBNACgAVgApACkAPQA9AEYAKQB7AFIARgA7AH0AfQBSAFQARQA7c3EAfgA/AAAO8QAADuYAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AS8KICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbnQgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGlmICgoQ2hhcmFjdGVyLmlzTGV0dGVyKHN0ci5jaGFyQXQoaSkpID09IGZhbHNlKSAmJiAoc3RyLmNoYXJBdChpKSAhPSAnICcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABaAEkARgAoAFYAPQA9AE4AVQApAHsAUgBGADsAfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKAAoAFYALgBWAHMATABlAHQAdABlAHIAKABWAE0AKABWACkAKQA9AD0ARgApACYAJgAoAFYATQAoAFYAKQAhAD0AJwAnACkAKQB7AFIARgA7AH0AfQBSAFQARQA7c3EAfgA/AAAPEgAADwcAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0ARoKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbnQgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGlmIChDaGFyYWN0ZXIuaXNMZXR0ZXJPckRpZ2l0KHN0ci5jaGFyQXQoaSkpID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABSAEkARgAoAFYAPQA9AE4AVQApAHsAUgBGADsAfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKABWAC4AVgBzAEwAZQB0AHQAZQByAE8AcgBEAFYAZwBWAHQAKABWAE0AKABWACkAKQA9AD0ARgApAHsAUgBGADsAfQB9AFIAVABFADtzcQB+AD8AAA80AAAPKQAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBNgogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGludCBzeiA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN6OyBpKyspIHsKICAgICAgICAgICAgaWYgKChDaGFyYWN0ZXIuaXNMZXR0ZXJPckRpZ2l0KHN0ci5jaGFyQXQoaSkpID09IGZhbHNlKSAmJiAoc3RyLmNoYXJBdChpKSAhPSAnICcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABhAEkARgAoAFYAPQA9AE4AVQApAHsAUgBGADsAfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKAAoAFYALgBWAHMATABlAHQAdABlAHIATwByAEQAVgBnAFYAdAAoAFYATQAoAFYAKQApAD0APQBGACkAJgAmACgAVgBNACgAVgApACEAPQAnACcAKQApAHsAUgBGADsAfQB9AFIAVABFADtzcQB+AD8AAA9aAAAPTwAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQBGwogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGludCBzeiA9IHN0ci5sZW5ndGgoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN6OyBpKyspIHsKICAgICAgICAgICAgaWYgKENoYXJVdGlscy5pc0FzY2lpUHJpbnRhYmxlKHN0ci5jaGFyQXQoaSkpID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB1cQB+AEQAAABTAEkARgAoAFYAPQA9AE4AVQApAHsAUgBGADsAfQBJAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBWAGYAKABWAC4AVgBzAEEAcwBjAFYAVgBQAHIAVgBuAHQAYQBiAGwAZQAoAFYATQAoAFYAKQApAD0APQBGACkAewBSAEYAOwB9AH0AUgBUAEUAO3NxAH4APwAAD3wAAA9xAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAESCiAgICAgICAgaWYgKHN0ciA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaW50IHN6ID0gc3RyLmxlbmd0aCgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3o7IGkrKykgewogICAgICAgICAgICBpZiAoQ2hhcmFjdGVyLmlzRGlnaXQoc3RyLmNoYXJBdChpKSkgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIHVxAH4ARAAAAEoASQBGACgAVgA9AD0ATgBVACkAewBSAEYAOwB9AEkAVgA9AFYATQAoACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYAZgAoAFYALgBWAHMARABWAGcAVgB0ACgAVgBNACgAVgApACkAPQA9AEYAKQB7AFIARgA7AH0AfQBSAFQARQA7c3EAfgA/AAAPoAAAD5UAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AS4KICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbnQgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGlmICgoQ2hhcmFjdGVyLmlzRGlnaXQoc3RyLmNoYXJBdChpKSkgPT0gZmFsc2UpICYmIChzdHIuY2hhckF0KGkpICE9ICcgJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIHVxAH4ARAAAAFkASQBGACgAVgA9AD0ATgBVACkAewBSAEYAOwB9AEkAVgA9AFYATQAoACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYAZgAoACgAVgAuAFYAcwBEAFYAZwBWAHQAKABWAE0AKABWACkAKQA9AD0ARgApACYAJgAoAFYATQAoAFYAKQAhAD0AJwAnACkAKQB7AFIARgA7AH0AfQBSAFQARQA7c3EAfgA/AAAPwAAAD7UAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0ARkKICAgICAgICBpZiAoc3RyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbnQgc3ogPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzejsgaSsrKSB7CiAgICAgICAgICAgIGlmICgoQ2hhcmFjdGVyLmlzV2hpdGVzcGFjZShzdHIuY2hhckF0KGkpKSA9PSBmYWxzZSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIHVxAH4ARAAAAFEASQBGACgAVgA9AD0ATgBVACkAewBSAEYAOwB9AEkAVgA9AFYATQAoACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AFYAZgAoACgAVgAuAFYAcwBXAGgAVgB0AGUAcwBwAGEAYwBlACgAVgBNACgAVgApACkAPQA9AEYAKQApAHsAUgBGADsAfQB9AFIAVABFADtzcQB+AD8AABB7AAAQYQAAAAVxAH4AKnNxAH4ABQAAAAB3BAAAAAp4cHQDhgogICAgICAgIGlmIChzdHIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKG1heFdpZHRoIDwgNCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJNaW5pbXVtIGFiYnJldmlhdGlvbiB3aWR0aCBpcyA0Iik7CiAgICAgICAgfQogICAgICAgIGlmIChzdHIubGVuZ3RoKCkgPD0gbWF4V2lkdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICB9CiAgICAgICAgaWYgKG9mZnNldCA+IHN0ci5sZW5ndGgoKSkgewogICAgICAgICAgICBvZmZzZXQgPSBzdHIubGVuZ3RoKCk7CiAgICAgICAgfQogICAgICAgIGlmICgoc3RyLmxlbmd0aCgpIC0gb2Zmc2V0KSA8IChtYXhXaWR0aCAtIDMpKSB7CiAgICAgICAgICAgIG9mZnNldCA9IHN0ci5sZW5ndGgoKSAtIChtYXhXaWR0aCAtIDMpOwogICAgICAgIH0KICAgICAgICBpZiAob2Zmc2V0IDw9IDQpIHsKICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbWF4V2lkdGggLSAzKSArICIuLi4iOwogICAgICAgIH0KICAgICAgICBpZiAobWF4V2lkdGggPCA3KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIk1pbmltdW0gYWJicmV2aWF0aW9uIHdpZHRoIHdpdGggb2Zmc2V0IGlzIDciKTsKICAgICAgICB9CiAgICAgICAgaWYgKChvZmZzZXQgKyAobWF4V2lkdGggLSAzKSkgPCBzdHIubGVuZ3RoKCkpIHsKICAgICAgICAgICAgcmV0dXJuICIuLi4iICsgYWJicmV2aWF0ZShzdHIuc3Vic3RyaW5nKG9mZnNldCksIG1heFdpZHRoIC0gMyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAiLi4uIiArIHN0ci5zdWJzdHJpbmcoc3RyLmxlbmd0aCgpIC0gKG1heFdpZHRoIC0gMykpOwogICAgdXEAfgBEAAAA3ABJAEYAKABWAD0APQBOAFUAKQB7AFIATgBVADsAfQBJAEYAKABWADwAVgApAHsAVABIAE4ATQAoACMAIwApADsAfQBJAEYAKABWAE0AKAApADwAPQBWACkAewBSAFYAOwB9AEkARgAoAFYAPgBWAE0AKAApACkAewBWAD0AVgBNACgAKQA7AH0ASQBGACgAKABWAE0AKAApAC0AVgApADwAKABWAC0AVgApACkAewBWAD0AVgBNACgAKQAtACgAVgAtAFYAKQA7AH0ASQBGACgAVgA8AD0AVgApAHsAUgBWAC4AcwB1AGIAVgBpAG4AZwAoAFYALABWAC0AVgApACsAIwAjADsAfQBJAEYAKABWADwAVgApAHsAVABIAE4ATQAoACMAIwApADsAfQBJAEYAKAAoAFYAKwAoAFYALQBWACkAKQA8AFYATQAoACkAKQB7AFIAIwAjACsATQAoAFYALgBzAHUAYgBWAGkAbgBnACgAVgApACwAVgAtAFYAKQA7AH0AUgAjACMAKwBWAC4AcwB1AGIAVgBpAG4AZwAoAFYATQAoACkALQAoAFYALQBWACkAKQA7c3EAfgA/AAAQzgAAEL0AAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0AawKICAgICAgICBpZiAoc3RyMSA9PSBzdHIyKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0cjEgPT0gbnVsbCB8fCBzdHIyID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGludCBpOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHIxLmxlbmd0aCgpICYmIGkgPCBzdHIyLmxlbmd0aCgpOyArK2kpIHsKICAgICAgICAgICAgaWYgKHN0cjEuY2hhckF0KGkpICE9IHN0cjIuY2hhckF0KGkpKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaSA8IHN0cjIubGVuZ3RoKCkgfHwgaSA8IHN0cjEubGVuZ3RoKCkpIHsKICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAtMTsKICAgIHVxAH4ARAAAAHMASQBGACgAVgA9AD0AVgApAHsAUgAtAFYAOwB9AEkARgAoAFYAPQA9AE4AVQB8AHwAVgA9AD0ATgBVACkAewBSAFYAOwB9AFYAbgB0AFYAOwBGAE8AKABWAD0AVgA7AFYAPABWAE0AKAApACYAJgBWADwAVgBNACgAKQA7ACsAKwBWACkAewBWAGYAKABWAE0AKABWACkAIQA9AFYATQAoAFYAKQApAHsAVgA7AH0AfQBWAGYAKABWADwAVgBNACgAKQB8AHwAVgA8AFYATQAoACkAKQB7AFIAVgA7AH0AUgAtAFYAO3NxAH4APwAAEScAABDvAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAYYCiAgICAgICAgaWYgKHN0cnMgPT0gbnVsbCB8fCBzdHJzLmxlbmd0aCA8PSAxKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgYm9vbGVhbiBhbnlTdHJpbmdOdWxsID0gZmFsc2U7CiAgICAgICAgYm9vbGVhbiBhbGxTdHJpbmdzTnVsbCA9IHRydWU7CiAgICAgICAgaW50IGFycmF5TGVuID0gc3Rycy5sZW5ndGg7CiAgICAgICAgaW50IHNob3J0ZXN0U3RyTGVuID0gSW50ZWdlci5NQVhfVkFMVUU7CiAgICAgICAgaW50IGxvbmdlc3RTdHJMZW4gPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFycmF5TGVuOyBpKyspIHsKICAgICAgICAgICAgaWYgKHN0cnNbaV0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgYW55U3RyaW5nTnVsbCA9IHRydWU7CiAgICAgICAgICAgICAgICBzaG9ydGVzdFN0ckxlbiA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGxTdHJpbmdzTnVsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgc2hvcnRlc3RTdHJMZW4gPSBNYXRoLm1pbihzdHJzW2ldLmxlbmd0aCgpLCBzaG9ydGVzdFN0ckxlbik7CiAgICAgICAgICAgICAgICBsb25nZXN0U3RyTGVuID0gTWF0aC5tYXgoc3Ryc1tpXS5sZW5ndGgoKSwgbG9uZ2VzdFN0ckxlbik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGFsbFN0cmluZ3NOdWxsIHx8IChsb25nZXN0U3RyTGVuID09IDAgJiYgIWFueVN0cmluZ051bGwpKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHNob3J0ZXN0U3RyTGVuID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICAgICAgICAgIGludCBmaXJzdERpZmYgPSAtMTsKICAgICAgICBmb3IgKGludCBzdHJpbmdQb3MgPSAwOyBzdHJpbmdQb3MgPCBzaG9ydGVzdFN0ckxlbjsgc3RyaW5nUG9zKyspIHsKICAgICAgICAgICAgY2hhciBjb21wYXJpc29uQ2hhciA9IHN0cnNbMF0uY2hhckF0KHN0cmluZ1Bvcyk7CiAgICAgICAgICAgIGZvciAoaW50IGFycmF5UG9zID0gMTsgYXJyYXlQb3MgPCBhcnJheUxlbjsgYXJyYXlQb3MrKykgewogICAgICAgICAgICAgICAgaWYgKHN0cnNbYXJyYXlQb3NdLmNoYXJBdChzdHJpbmdQb3MpICE9IGNvbXBhcmlzb25DaGFyKSB7CiAgICAgICAgICAgICAgICAgICAgZmlyc3REaWZmID0gc3RyaW5nUG9zOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmaXJzdERpZmYgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZmlyc3REaWZmID09IC0xICYmIHNob3J0ZXN0U3RyTGVuICE9IGxvbmdlc3RTdHJMZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3J0ZXN0U3RyTGVuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmlyc3REaWZmOwogICAgdXEAfgBEAAABOQBJAEYAKABWAD0APQBOAFUAfAB8AFYALgBsAGUAbgBnAHQAaAA8AD0AVgApAHsAUgAtAFYAOwB9AEIATwBWAD0ARgA7AEIATwBWAD0AVABFADsASQBWAD0AVgA7AEkAVgA9AFYAOwBJAFYAPQBWADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBJAEYAKABWAFsAaQBdAD0APQBOAFUAKQB7AFYAPQBUAEUAOwBWAD0AVgA7AH0ARQBMAHsAVgA9AEYAOwBWAD0AVgBNACgAVgBbAGkAXQAuAE0AKAApACwAVgApADsAVgA9AFYATQAoAFYAWwBpAF0ALgBNACgAKQAsAFYAKQA7AH0AfQBJAEYAKABhAGwAbABTAHQAcgBpAG4AZwBzAE4AdQBsAGwAfAB8ACgAVgA9AD0AMAAmACYAIQBWACkAKQB7AFIALQBWADsAfQBJAEYAKABWAD0APQBWACkAewBSAFYAOwB9AEkAVgA9AC0AVgA7AEYATwAoAEkAVgA9AFYAOwBWADwAVgA7AFYAKwArACkAewBDAEgAVgA9AFYAWwAwAF0ALgBNACgAVgApADsARgBPACgASQBWAD0AVgA7AFYAPABWADsAVgArACsAKQB7AEkARgAoAFYAWwBhAHIAcgBhAHkAUABvAHMAXQAuAE0AKABWACkAIQA9AFYAKQB7AFYAPQBWADsAVgA7AH0AfQBJAEYAKABWACEAPQAtAFYAKQB7AFYAOwB9AH0ASQBGACgAVgA9AD0ALQAxACYAJgBWACEAPQBWACkAewBSAFYAOwB9AFIAVgA7c3EAfgA/AAARXAAAEUoAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0Ae4KICAgICAgICBpZiAoc3RycyA9PSBudWxsIHx8IHN0cnMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZOwogICAgICAgIH0KICAgICAgICBpbnQgc21hbGxlc3RJbmRleE9mRGlmZiA9IGluZGV4T2ZEaWZmZXJlbmNlKHN0cnMpOwogICAgICAgIGlmIChzbWFsbGVzdEluZGV4T2ZEaWZmID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJzWzBdID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3Ryc1swXTsKICAgICAgICB9IGVsc2UgaWYgKHNtYWxsZXN0SW5kZXhPZkRpZmYgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cnNbMF0uc3Vic3RyaW5nKDAsIHNtYWxsZXN0SW5kZXhPZkRpZmYpOwogICAgICAgIH0KICAgIHVxAH4ARAAAAGUASQBGACgAVgA9AD0ATgBVAHwAfABWAC4AbABlAG4AZwB0AGgAPQA9AFYAKQB7AFIAVgA7AH0ASQBWAD0ATQAoAFYAKQA7AEkARgAoAFYAPQA9AC0AVgApAHsASQBGACgAVgBbADAAXQA9AD0ATgBVACkAewBSAFYAOwB9AFIAVgBbADAAXQA7AH0ARQBMAEkARgAoAFYAPQA9AFYAKQB7AFIAVgA7AH0ARQBMAHsAUgBWAFsAVgBdAC4ATQAoAFYALABWACkAOwB9c3EAfgA/AAARzQAAEYIAAAAFcQB+ACpzcQB+AAUAAAAAdwQAAAAKeHB0BEAKICAgICAgICBpZiAocyA9PSBudWxsIHx8IHQgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJTdHJpbmdzIG11c3Qgbm90IGJlIG51bGwiKTsKICAgICAgICB9CgogICAgICAgIAoKICAgICAgICBpbnQgbiA9IHMubGVuZ3RoKCk7ICAgICAgICAgaW50IG0gPSB0Lmxlbmd0aCgpOyAKICAgICAgICBpZiAobiA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgIH0gZWxzZSBpZiAobSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG4gPiBtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyB0bXAgPSBzOwogICAgICAgICAgICBzID0gdDsKICAgICAgICAgICAgdCA9IHRtcDsKICAgICAgICAgICAgbiA9IG07CiAgICAgICAgICAgIG0gPSB0Lmxlbmd0aCgpOwogICAgICAgIH0KCiAgICAgICAgaW50IHBbXSA9IG5ldyBpbnRbbisxXTsgICAgICAgICBpbnQgZFtdID0gbmV3IGludFtuKzFdOyAgICAgICAgIGludCBfZFtdOyAKICAgICAgICAgICAgICAgIGludCBpOyAgICAgICAgIGludCBqOyAKICAgICAgICBjaGFyIHRfajsgCiAgICAgICAgaW50IGNvc3Q7IAogICAgICAgIGZvciAoaSA9IDA7IGk8PW47IGkrKykgewogICAgICAgICAgICBwW2ldID0gaTsKICAgICAgICB9CgogICAgICAgIGZvciAoaiA9IDE7IGo8PW07IGorKykgewogICAgICAgICAgICB0X2ogPSB0LmNoYXJBdChqLTEpOwogICAgICAgICAgICBkWzBdID0gajsKCiAgICAgICAgICAgIGZvciAoaT0xOyBpPD1uOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvc3QgPSBzLmNoYXJBdChpLTEpPT10X2ogPyAwIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW2ldID0gTWF0aC5taW4oTWF0aC5taW4oZFtpLTFdKzEsIHBbaV0rMSksICBwW2ktMV0rY29zdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gcDsKICAgICAgICAgICAgcCA9IGQ7CiAgICAgICAgICAgIGQgPSBfZDsKICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcFtuXTsKICAgIHVxAH4ARAAAAWAASQBGACgAVgA9AD0ATgBVAHwAfABWAD0APQBOAFUAKQB7AFQASABOAE0AKAAjACMAKQA7AH0AaQBWAFYAVgA9AFYALgBsAGUAVgBnAFYAaAAoACkAOwBpAFYAVgBWAD0AVgAuAGwAZQBWAGcAVgBoACgAKQA7AEkARgAoAFYAPQA9AFYAKQB7AFIAVgA7AH0ARQBMAEkARgAoAFYAPQA9AFYAKQB7AHIAZQB0AHUAcgBWAFYAOwB9AEkARgAoAFYAPgBWACkAewBTAFYAPQBWADsAVgA9AFYAOwBWAD0AVgBtAHAAOwBWAD0AVgA7AFYAPQBWAC4AbABlAG4AZwBWAGgAKAApADsAfQBWAFYAWwBdAD0AVgBlAHcAVgBbAFYAKwAxAF0AOwBWAFYAWwBdAD0AVgBlAHcAVgBbAFYAKwAxAF0AOwBWAF8AVgBbAF0AOwBWAG4AdABWADsAVgBuAHQAVgA7AEMASABWADsASQBWADsARgBPACgAVgA9AFYAOwBWADwAPQBWADsAVgArACsAKQB7AFYAWwBWAF0APQBWADsAfQBGAE8AKABWAD0AVgA7AFYAPAA9AFYAOwBWACsAKwApAHsAVgA9AFYALgBjAGgAYQByAEEAVgAoAFYALQBWACkAOwBWAFsAMABdAD0AVgA7AEYATwAoAFYAPQBWADsAVgA8AD0AVgA7AFYAKwArACkAewBWAD0AVgBNACgAVgAtAFYAKQA9AD0AdABfAGoAPwBWADoAVgA7AFYAWwBWAF0APQBWAC4AbQBWAG4AKABWAC4AbQBWAG4AKABWAFsAVgAtAFYAXQArAFYALABWAFsAVgBdACsAVgApACwAVgBbAFYALQBWAF0AKwBWACkAOwB9AFYAPQBWADsAVgA9AFYAOwBWAD0AXwBWADsAfQBSAFYAWwBuAF0AO3NxAH4APwAAEiwAABIkAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAEPCiAgICAgICAgaWYgKHN0ciA9PSBudWxsIHx8IHByZWZpeCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiAoc3RyID09IG51bGwgJiYgcHJlZml4ID09IG51bGwpOwogICAgICAgIH0KICAgICAgICBpZiAocHJlZml4Lmxlbmd0aCgpID4gc3RyLmxlbmd0aCgpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0ci5yZWdpb25NYXRjaGVzKGlnbm9yZUNhc2UsIDAsIHByZWZpeCwgMCwgcHJlZml4Lmxlbmd0aCgpKTsKICAgIHVxAH4ARAAAAEYASQBGACgAVgA9AD0ATgBVAHwAfABWAD0APQBOAFUAKQB7AFIAKABWAD0APQBOAFUAJgAmAFYAPQA9AE4AVQApADsAfQBJAEYAKABWAE0AKAApAD4AVgBNACgAKQApAHsAUgBGADsAfQBSAFYATQAoAFYALABWACwAVgAsAFYALABWAE0AKAApACkAO3NxAH4APwAAEncAABJuAAAABXEAfgAqc3EAfgAFAAAAAHcEAAAACnhwdAFPCiAgICAgICAgaWYgKHN0ciA9PSBudWxsIHx8IHN1ZmZpeCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiAoc3RyID09IG51bGwgJiYgc3VmZml4ID09IG51bGwpOwogICAgICAgIH0KICAgICAgICBpZiAoc3VmZml4Lmxlbmd0aCgpID4gc3RyLmxlbmd0aCgpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaW50IHN0ck9mZnNldCA9IHN0ci5sZW5ndGgoKSAtIHN1ZmZpeC5sZW5ndGgoKTsKICAgICAgICByZXR1cm4gc3RyLnJlZ2lvbk1hdGNoZXMoaWdub3JlQ2FzZSwgc3RyT2Zmc2V0LCBzdWZmaXgsIDAsIHN1ZmZpeC5sZW5ndGgoKSk7CiAgICB1cQB+AEQAAABZAEkARgAoAFYAPQA9AE4AVQB8AHwAVgA9AD0ATgBVACkAewBSACgAVgA9AD0ATgBVACYAJgBWAD0APQBOAFUAKQA7AH0ASQBGACgAVgBNACgAKQA+AFYATQAoACkAKQB7AFIARgA7AH0ASQBWAD0AVgBNACgAKQAtAFYATQAoACkAOwBSAFYATQAoAFYALABWAE8AZgBmAHMAZQB0ACwAVgAsAFYALABWAE0AKAApACkAO3hzcQB+ADsAAAADcQB+ADBxAH4AMnNxAH4ABQAAAAB3BAAAAAp4cHNxAH4ABQAAAAR3BAAAAApzcQB+AD8AAAAzAAAAJwAAAAVxAH4AMnNxAH4ABQAAAAR3BAAAAApzcgAkdG9rZW5pemF0b3IuU291cmNlQ29kZVNuaXBwZXRNYXRjaGVkVwqEkHeL5YsCAAFJABRzaW1pbGFyaXR5UGVyY2VudGFnZXhxAH4APwAABHYAAARpAAAABXQAKDc4ZWE0MGJiMGRkMDk3NTE3Yzc0MzcxZjVmOGFkZWUxODFjMWY1NWVzcQB+AAUAAAAAdwQAAAAKeHQAS2dpdGh1YjpraW5nYXJneWxlLWV4aXN0LTEuNC54LThkYTM2N2Yvc3JjL29yZy9leGlzdC9jbGllbnQvQ2xpZW50RnJhbWUuamF2YXB1cQB+AEQAAABZAEkARgAoAFYATQAoACkAKQB7AFYAWwBdAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAYwBoAFYAbABkAHIAZQBuAC4AbABlAG4AZwB0AGgAOwBWACsAKwApAHsAQgBPAFYAPQBNACgATgBNACgAVgAsAFYAWwBpAF0AKQApADsASQBGACgAIQBWACkAewBSAEYAOwB9AH0AfQBSAFYATQAoACkAOwAAAGRzcQB+AV0AAABnAAAAWgAAAAV0ACg5OWIxOWMyNjEzMGU5ZjkzMWUwMjYyNWE1NjMzMjM0NGQ5YTc3NmExc3EAfgAFAAAAAHcEAAAACnh0ADpnaXRodWI6YWd1aXRhcmZyZWFrLUJpb0dVSS0wYWE1NDhjL3NyYy9IaXNUcmVlL1RyZWVVSS5qYXZhcHVxAH4ARAAAAFkASQBGACgAVgBNACgAKQApAHsAVgBbAF0AVgA9AFYATQAoACkAOwBGAE8AKABWAG4AdABWAD0AVgA7AFYAPABjAGgAVgBsAGQAcgBlAG4ALgBsAGUAbgBnAHQAaAA7AFYAKwArACkAewBCAE8AVgA9AE0AKABOAE0AKABWACwAVgBbAGkAXQApACkAOwBJAEYAKAAhAFYAKQB7AFIARgA7AH0AfQB9AFIAVgBNACgAKQA7AAAAZHNxAH4BXQAAAK0AAACiAAAABXQAKGRhOGU1NWRiMDlmOWY2MmIxNTI1YjY2Zjk4NjM3MGE4ZjY0OTgwOTFzcQB+AAUAAAAAdwQAAAAKeHQAQGdpdGh1YjppZ25hY2lvZ3MtTXlNZW1vLTc1ODZiNzgvc3JjL2NvbS9NeU1lbW8vR2VuZXJhbFV0aWxzLmphdmFwdXEAfgBEAAAAWQBJAEYAKABWAE0AKAApACkAewBWAFsAXQBWAD0AVgBNACgAKQA7AEYATwAoAFYAbgB0AFYAPQBWADsAVgA8AGMAaABWAGwAZAByAGUAbgAuAGwAZQBuAGcAdABoADsAVgArACsAKQB7AEIATwBWAD0ATQAoAE4ATQAoAFYALABWAFsAaQBdACkAKQA7AEkARgAoACEAVgApAHsAUgBGADsAfQB9AH0AUgBWAE0AKAApADsAAABkc3EAfgFdAAAAVQAAAEgAAAAFdAAoNjZhYjAzMjRiNTA3ZDBhNDg2ZmYzN2E2MDA2NjU5NjhmOGNmYzBhMHNxAH4ABQAAAAB3BAAAAAp4dABhZ2l0aHViOndoaXRpbmdqci1jeGYtOWExMTMxMy90ZXN0dXRpbHMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2N4Zi90ZXN0dXRpbC9jb21tb24vVGVzdFV0aWwuamF2YXB1cQB+AEQAAABZAEkARgAoAFYATQAoACkAKQB7AFYAWwBdAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAYwBoAFYAbABkAHIAZQBuAC4AbABlAG4AZwB0AGgAOwBWACsAKwApAHsAQgBPAFYAPQBNACgATgBNACgAVgAsAFYAWwBpAF0AKQApADsASQBGACgAIQBWACkAewBSAEYAOwB9AH0AfQBSAFYATQAoACkAOwAAAGR4cHQBMAogICAgaWYgKGRpci5pc0RpcmVjdG9yeSgpKSB7CiAgICAgICAgU3RyaW5nW10gY2hpbGRyZW4gPSBkaXIubGlzdCgpOwogICAgICAgIGZvciAoaW50IGk9MDsgaTxjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkZWxldGVEaXIobmV3IEZpbGUoZGlyLCBjaGlsZHJlbltpXSkpOwogICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICAgICByZXR1cm4gZGlyLmRlbGV0ZSgpOwp1cQB+AEQAAABZAEkARgAoAFYATQAoACkAKQB7AFYAWwBdAFYAPQBWAE0AKAApADsARgBPACgAVgBuAHQAVgA9AFYAOwBWADwAYwBoAFYAbABkAHIAZQBuAC4AbABlAG4AZwB0AGgAOwBWACsAKwApAHsAQgBPAFYAPQBNACgATgBNACgAVgAsAFYAWwBpAF0AKQApADsASQBGACgAIQBWACkAewBSAEYAOwB9AH0AfQBSAFYATQAoACkAO3NxAH4APwAAAH4AAABqAAAABXEAfgAyc3EAfgAFAAAAAHcEAAAACnhwdAHWICAKICAgIAogICAgICBPdXRwdXRTdHJlYW0gb3V0ID0gbnVsbDsKICAgICAgdHJ5ewogICAgICAgICAgb3V0ID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0ob3V0RmlsZSk7CiAgICAgICAgICBieXRlIGJ1ZltdPW5ldyBieXRlWzEwMjRdOwogICAgICAgICAgaW50IGxlbjsKCSAgU3RyaW5nIHRlc3QgPSAiZG8gc29tZXRoaW5nIjsKICAgICAgICAgIHdoaWxlKChsZW49aW5wdXRTdHJlYW0ucmVhZChidWYpKT4wKQogICAgICAgICAgICAgIG91dC53cml0ZShidWYsMCxsZW4pOwogICAgICAgICAgaW5wdXRTdHJlYW0uY2xvc2UoKTsKICAgICAgfQogICAgICBjYXRjaCAoSU9FeGNlcHRpb24gZSl7fQogICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG91dC5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBleCkgewogICAgICAgICAgICB9CiAgICAgICAKICAgICAgfQp1cQB+AEQAAACFAE8AdQB0AHAAdQB0AFMAdAByAGUAYQBtAFYAPQBOAFUAOwBUAFIAewBWAD0ATgBNACgAVgBGAGkAbABlACkAOwBWAFYAWwBdAD0ATgBWAFsAVgA0AF0AOwBJAFYAOwBT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YXRjaCAoRXhjZXB0aW9uIHgpIHsKICAgICAgeC5wcmludFN0YWNrVHJhY2UoKTsKICAgIH0KICAgIFN5c3RlbS5vdXQucHJpbnRsbigiZG9uZS4iKTsKCiAgICAgCiAgdXEAfgBEAAAAuwBUAFIAewBJAFYAPQBWADsASQBGACgAVgA+AFYAKQB7AFYAPQBWAE0AKABWAFsAMABdACkAOwB9AFQAZQBzAHQASABhAG4AZABsAGUAcgBWAD0ATgBNACgAKQA7AFYALgBQAHIAbwBjAGUAcwBzAG8AcgBWAD0ATgBWAE0AKABWACkAOwBiAGwAYQBiAGwAYQBiAGwAYQBUAFMAZQByAHYAZQByAFMAbwBjAGsAZQB0AFYAPQBOAE0AKABWACkAOwBUAFAAcgBvAHQAbwBjAG8AbABGAGEAYwB0AG8AcgB5AFYAPQBOAFYATQAoACkAOwBUAFMAZQByAHYAZQByAFYAOwBWAD0ATgBNACgAVgAsAFYALABWACkAOwBWAE0AKAAjACMAKwBWACsAIwAjACkAOwBWAE0AKAApADsAfQBDAEEAKABFAFYAYwBlAHAAdABpAG8AbgBWACkAewBWAE0AKAApADsAfQBWAE0AKAAjACMAKQA7eHh0AApmaWxlc19qYXZh